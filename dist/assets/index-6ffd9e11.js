var Xo=Object.defineProperty;var Yo=(l,s,c)=>s in l?Xo(l,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[s]=c;var kn=(l,s,c)=>(Yo(l,typeof s!="symbol"?s+"":s,c),c);import{b as kt,_ as Mt,E as gt,g as Mn,u as At,c as eo,ab as En,w as Dt,d as ft,ac as to,ad as Zo,ae as Jo,af as Qo,ag as es,ah as ts,ai as ns,aj as os,ak as ss,al as X,a7 as Ct,Q as ut,am as rs,an as no,R as $n,D as dt,F as ht,P as Ft,ao as Tt,ap as oo,aq as it,I as ct,ar as as,G as On,x as is,as as ls,at as cs,a3 as us,au as Tn,J as bt,av as $t,aw as Wn,ax as Ln,O as lt,a6 as so,ay as Hn,C as ds}from"./index-1285a334.js";import{g as ps,h as fs,u as Gn,i as Kn,E as Lt,j as ms,d as Zt,e as vs,c as tt,_ as Jt,k as gs}from"./useCached-4f487c00.js";import{e as hs,f as ys,g as _s,h as wn,i as Je,b as Qt,M as jt,a as Rn,v as bs,u as ks,k as Cs,d as xs,c as Ss,E as ro,j as ws}from"./message-55c9dbc8.js";import{z as ce,v as z,r as P,ab as qt,k as x,J as re,C as $,D as N,E as _e,m as O,B as Ut,P as St,F as le,l as T,A as et,G as te,L as Y,H as Ke,T as Ot,a6 as Is,y as zt,t as Yt,e as yt,u as b,ae as ao,K as Qe,M as en,a2 as Ee,R as Ms,h as qn,af as io,O as Ve,a5 as It,ag as Es,ah as lo,ac as vt,n as tn,o as Bn,ai as $s,a7 as Os,w as at,aj as Ts,ak as wt,U as Ls,X as Pt,a9 as nn,aa as on,al as Rs,am as Bs,a as co,ad as Ns,an as js,ao as zs}from"./vue-656d1634.js";import{a as Ps,c as As,g as Ds}from"./xgplayer-9c9652e6.js";import{E as Fs}from"./el-divider-060423de.js";const Us=kt({...hs,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Vs=ys,Ws=ce({name:"ElDrawer",components:{ElOverlay:ps,ElFocusTrap:fs,ElIcon:gt,Close:Mn},inheritAttrs:!1,props:Us,emits:Vs,setup(l,{slots:s}){Gn({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},z(()=>!!s.title)),Gn({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},z(()=>!!l.customClass));const c=P(),f=P(),g=At("drawer"),{t:h}=eo(),k=z(()=>l.direction==="rtl"||l.direction==="ltr"),o=z(()=>En(l.size));return{..._s(l,c),drawerRef:c,focusStartRef:f,isHorizontal:k,drawerSize:o,ns:g,t:h}}}),Hs=["aria-label","aria-labelledby","aria-describedby"],Gs=["id","aria-level"],Ks=["aria-label"],qs=["id"];function Xs(l,s,c,f,g,h){const k=qt("close"),o=qt("el-icon"),i=qt("el-focus-trap"),e=qt("el-overlay");return x(),re(Is,{to:"body",disabled:!l.appendToBody},[$(Ot,{name:l.ns.b("fade"),onAfterEnter:l.afterEnter,onAfterLeave:l.afterLeave,onBeforeLeave:l.beforeLeave,persisted:""},{default:N(()=>[_e($(e,{mask:l.modal,"overlay-class":l.modalClass,"z-index":l.zIndex,onClick:l.onModalClick},{default:N(()=>[$(i,{loop:"",trapped:l.visible,"focus-trap-el":l.drawerRef,"focus-start-el":l.focusStartRef,onReleaseRequested:l.onCloseRequested},{default:N(()=>[O("div",Ut({ref:"drawerRef","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:l.titleId,"aria-describedby":l.bodyId},l.$attrs,{class:[l.ns.b(),l.direction,l.visible&&"open",l.customClass],style:l.isHorizontal?"width: "+l.drawerSize:"height: "+l.drawerSize,role:"dialog",onClick:s[1]||(s[1]=St(()=>{},["stop"]))}),[O("span",{ref:"focusStartRef",class:le(l.ns.e("sr-focus")),tabindex:"-1"},null,2),l.withHeader?(x(),T("header",{key:0,class:le(l.ns.e("header"))},[l.$slots.title?et(l.$slots,"title",{key:1},()=>[Y(" DEPRECATED SLOT ")]):et(l.$slots,"header",{key:0,close:l.handleClose,titleId:l.titleId,titleClass:l.ns.e("title")},()=>[l.$slots.title?Y("v-if",!0):(x(),T("span",{key:0,id:l.titleId,role:"heading","aria-level":l.headerAriaLevel,class:le(l.ns.e("title"))},te(l.title),11,Gs))]),l.showClose?(x(),T("button",{key:2,"aria-label":l.t("el.drawer.close"),class:le(l.ns.e("close-btn")),type:"button",onClick:s[0]||(s[0]=(...n)=>l.handleClose&&l.handleClose(...n))},[$(o,{class:le(l.ns.e("close"))},{default:N(()=>[$(k)]),_:1},8,["class"])],10,Ks)):Y("v-if",!0)],2)):Y("v-if",!0),l.rendered?(x(),T("div",{key:1,id:l.bodyId,class:le(l.ns.e("body"))},[et(l.$slots,"default")],10,qs)):Y("v-if",!0),l.$slots.footer?(x(),T("div",{key:2,class:le(l.ns.e("footer"))},[et(l.$slots,"footer")],2)):Y("v-if",!0)],16,Hs)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Ke,l.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Ys=Mt(Ws,[["render",Xs],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Zs=Dt(Ys),Js=ce({inheritAttrs:!1});function Qs(l,s,c,f,g,h){return et(l.$slots,"default")}var er=Mt(Js,[["render",Qs],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const tr=ce({name:"ElCollectionItem",inheritAttrs:!1});function nr(l,s,c,f,g,h){return et(l.$slots,"default")}var or=Mt(tr,[["render",nr],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const sr="data-el-collection-item",rr=l=>{const s=`El${l}Collection`,c=`${s}Item`,f=Symbol(s),g=Symbol(c),h={...er,name:s,setup(){const o=P(null),i=new Map;zt(f,{itemMap:i,getItems:()=>{const n=b(o);if(!n)return[];const r=Array.from(n.querySelectorAll(`[${sr}]`));return[...i.values()].sort((a,p)=>r.indexOf(a.ref)-r.indexOf(p.ref))},collectionRef:o})}},k={...or,name:c,setup(o,{attrs:i}){const e=P(null),n=Yt(f,void 0);zt(g,{collectionItemRef:e}),yt(()=>{const r=b(e);r&&n.itemMap.set(r,{ref:r,...i})}),ao(()=>{const r=b(e);n.itemMap.delete(r)})}};return{COLLECTION_INJECTION_KEY:f,COLLECTION_ITEM_INJECTION_KEY:g,ElCollection:h,ElCollectionItem:k}},Cn=kt({trigger:wn.trigger,effect:{...Je.effect,default:"light"},type:{type:ft(String)},placement:{type:ft(String),default:"bottom"},popperOptions:{type:ft(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:ft([Number,String]),default:0},maxHeight:{type:ft([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:ft(Object)},teleported:Je.teleported});kt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:to}});kt({onKeydown:{type:ft(Function)}});rr("Dropdown");const ar=kt({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:Kn,default:"primary"},cancelButtonType:{type:String,values:Kn,default:"text"},icon:{type:to,default:()=>Zo},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Je.teleported,persistent:Je.persistent,width:{type:[String,Number],default:150}}),ir={confirm:l=>l instanceof MouseEvent,cancel:l=>l instanceof MouseEvent},lr=ce({name:"ElPopconfirm"}),cr=ce({...lr,props:ar,emits:ir,setup(l,{emit:s}){const c=l,{t:f}=eo(),g=At("popconfirm"),h=P(),k=()=>{var t,a;(a=(t=h.value)==null?void 0:t.onClose)==null||a.call(t)},o=z(()=>({width:En(c.width)})),i=t=>{s("confirm",t),k()},e=t=>{s("cancel",t),k()},n=z(()=>c.confirmButtonText||f("el.popconfirm.confirmButtonText")),r=z(()=>c.cancelButtonText||f("el.popconfirm.cancelButtonText"));return(t,a)=>(x(),re(b(Qt),Ut({ref_key:"tooltipRef",ref:h,trigger:"click",effect:"light"},t.$attrs,{"popper-class":`${b(g).namespace.value}-popover`,"popper-style":b(o),teleported:t.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":t.hideAfter,persistent:t.persistent}),{content:N(()=>[O("div",{class:le(b(g).b())},[O("div",{class:le(b(g).e("main"))},[!t.hideIcon&&t.icon?(x(),re(b(gt),{key:0,class:le(b(g).e("icon")),style:Qe({color:t.iconColor})},{default:N(()=>[(x(),re(en(t.icon)))]),_:1},8,["class","style"])):Y("v-if",!0),Ee(" "+te(t.title),1)],2),O("div",{class:le(b(g).e("action"))},[$(b(Lt),{size:"small",type:t.cancelButtonType==="text"?"":t.cancelButtonType,text:t.cancelButtonType==="text",onClick:e},{default:N(()=>[Ee(te(b(r)),1)]),_:1},8,["type","text"]),$(b(Lt),{size:"small",type:t.confirmButtonType==="text"?"":t.confirmButtonType,text:t.confirmButtonType==="text",onClick:i},{default:N(()=>[Ee(te(b(n)),1)]),_:1},8,["type","text"])],2)],2)]),default:N(()=>[t.$slots.reference?et(t.$slots,"reference",{key:0}):Y("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var ur=Mt(cr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const uo=Dt(ur),dr=kt({trigger:wn.trigger,placement:Cn.placement,disabled:wn.disabled,visible:Je.visible,transition:Je.transition,popperOptions:Cn.popperOptions,tabindex:Cn.tabindex,content:Je.content,popperStyle:Je.popperStyle,popperClass:Je.popperClass,enterable:{...Je.enterable,default:!0},effect:{...Je.effect,default:"light"},teleported:Je.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),pr={"update:visible":l=>Jo(l),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},fr="onUpdate:visible",mr=ce({name:"ElPopover"}),vr=ce({...mr,props:dr,emits:pr,setup(l,{expose:s,emit:c}){const f=l,g=z(()=>f[fr]),h=At("popover"),k=P(),o=z(()=>{var d;return(d=b(k))==null?void 0:d.popperRef}),i=z(()=>[{width:En(f.width)},f.popperStyle]),e=z(()=>[h.b(),f.popperClass,{[h.m("plain")]:!!f.content}]),n=z(()=>f.transition===`${h.namespace.value}-fade-in-linear`),r=()=>{var d;(d=k.value)==null||d.hide()},t=()=>{c("before-enter")},a=()=>{c("before-leave")},p=()=>{c("after-enter")},u=()=>{c("update:visible",!1),c("after-leave")};return s({popperRef:o,hide:r}),(d,v)=>(x(),re(b(Qt),Ut({ref_key:"tooltipRef",ref:k},d.$attrs,{trigger:d.trigger,placement:d.placement,disabled:d.disabled,visible:d.visible,transition:d.transition,"popper-options":d.popperOptions,tabindex:d.tabindex,content:d.content,offset:d.offset,"show-after":d.showAfter,"hide-after":d.hideAfter,"auto-close":d.autoClose,"show-arrow":d.showArrow,"aria-label":d.title,effect:d.effect,enterable:d.enterable,"popper-class":b(e),"popper-style":b(i),teleported:d.teleported,persistent:d.persistent,"gpu-acceleration":b(n),"onUpdate:visible":b(g),onBeforeShow:t,onBeforeHide:a,onShow:p,onHide:u}),{content:N(()=>[d.title?(x(),T("div",{key:0,class:le(b(h).e("title")),role:"title"},te(d.title),3)):Y("v-if",!0),et(d.$slots,"default",{},()=>[Ee(te(d.content),1)])]),default:N(()=>[d.$slots.reference?et(d.$slots,"reference",{key:0}):Y("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var gr=Mt(vr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const Xn=(l,s)=>{const c=s.arg||s.value,f=c==null?void 0:c.popperRef;f&&(f.triggerRef=l)};var hr={mounted(l,s){Xn(l,s)},updated(l,s){Xn(l,s)}};const yr="popover",_r=Qo(hr,yr),po=Dt(gr,{directive:_r}),br=kt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:l=>l>=0&&l<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:ft(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:ft([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:ft(Function),default:l=>`${l}%`}}),kr=["aria-valuenow"],Cr={viewBox:"0 0 100 100"},xr=["d","stroke","stroke-linecap","stroke-width"],Sr=["d","stroke","opacity","stroke-linecap","stroke-width"],wr={key:0},Ir=ce({name:"ElProgress"}),Mr=ce({...Ir,props:br,setup(l){const s=l,c={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},f=At("progress"),g=z(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:_(s.percentage)})),h=z(()=>(s.strokeWidth/s.width*100).toFixed(1)),k=z(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(h.value)/2}`,10):0),o=z(()=>{const y=k.value,S=s.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${y}
          a ${y} ${y} 0 1 1 0 ${S?"-":""}${y*2}
          a ${y} ${y} 0 1 1 0 ${S?"":"-"}${y*2}
          `}),i=z(()=>2*Math.PI*k.value),e=z(()=>s.type==="dashboard"?.75:1),n=z(()=>`${-1*i.value*(1-e.value)/2}px`),r=z(()=>({strokeDasharray:`${i.value*e.value}px, ${i.value}px`,strokeDashoffset:n.value})),t=z(()=>({strokeDasharray:`${i.value*e.value*(s.percentage/100)}px, ${i.value}px`,strokeDashoffset:n.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),a=z(()=>{let y;return s.color?y=_(s.percentage):y=c[s.status]||c.default,y}),p=z(()=>s.status==="warning"?es:s.type==="line"?s.status==="success"?ts:ns:s.status==="success"?os:Mn),u=z(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),d=z(()=>s.format(s.percentage));function v(y){const S=100/y.length;return y.map((C,M)=>qn(C)?{color:C,percentage:(M+1)*S}:C).sort((C,M)=>C.percentage-M.percentage)}const _=y=>{var S;const{color:w}=s;if(Ms(w))return w(y);if(qn(w))return w;{const C=v(w);for(const M of C)if(M.percentage>y)return M.color;return(S=C[C.length-1])==null?void 0:S.color}};return(y,S)=>(x(),T("div",{class:le([b(f).b(),b(f).m(y.type),b(f).is(y.status),{[b(f).m("without-text")]:!y.showText,[b(f).m("text-inside")]:y.textInside}]),role:"progressbar","aria-valuenow":y.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[y.type==="line"?(x(),T("div",{key:0,class:le(b(f).b("bar"))},[O("div",{class:le(b(f).be("bar","outer")),style:Qe({height:`${y.strokeWidth}px`})},[O("div",{class:le([b(f).be("bar","inner"),{[b(f).bem("bar","inner","indeterminate")]:y.indeterminate},{[b(f).bem("bar","inner","striped")]:y.striped},{[b(f).bem("bar","inner","striped-flow")]:y.stripedFlow}]),style:Qe(b(g))},[(y.showText||y.$slots.default)&&y.textInside?(x(),T("div",{key:0,class:le(b(f).be("bar","innerText"))},[et(y.$slots,"default",{percentage:y.percentage},()=>[O("span",null,te(b(d)),1)])],2)):Y("v-if",!0)],6)],6)],2)):(x(),T("div",{key:1,class:le(b(f).b("circle")),style:Qe({height:`${y.width}px`,width:`${y.width}px`})},[(x(),T("svg",Cr,[O("path",{class:le(b(f).be("circle","track")),d:b(o),stroke:`var(${b(f).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":y.strokeLinecap,"stroke-width":b(h),fill:"none",style:Qe(b(r))},null,14,xr),O("path",{class:le(b(f).be("circle","path")),d:b(o),stroke:b(a),fill:"none",opacity:y.percentage?1:0,"stroke-linecap":y.strokeLinecap,"stroke-width":b(h),style:Qe(b(t))},null,14,Sr)]))],6)),(y.showText||y.$slots.default)&&!y.textInside?(x(),T("div",{key:2,class:le(b(f).e("text")),style:Qe({fontSize:`${b(u)}px`})},[et(y.$slots,"default",{percentage:y.percentage},()=>[y.status?(x(),re(b(gt),{key:1},{default:N(()=>[(x(),re(en(b(p))))]),_:1})):(x(),T("span",wr,te(b(d)),1))])],6)):Y("v-if",!0)],10,kr))}});var Er=Mt(Mr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const $r=Dt(Er),Or=kt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:ss,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),Tr=ce({name:"ElText"}),Lr=ce({...Tr,props:Or,setup(l){const s=l,c=ms(),f=At("text"),g=z(()=>[f.b(),f.m(s.type),f.m(c.value),f.is("truncated",s.truncated)]);return(h,k)=>(x(),re(en(h.tag),{class:le(b(g))},{default:N(()=>[et(h.$slots,"default")]),_:3},8,["class"]))}});var Rr=Mt(Lr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const Br=Dt(Rr),fo=(l,s,c)=>{switch(s){case X.SYSTEM:case X.TEXT:return`${l}:${c}`;case X.IMAGE:return`${l}: ${jt[X.IMAGE]}`;case X.FILE:return`${l}: ${jt[X.FILE]}`;case X.VOICE:return`${l}: ${jt[X.VOICE]}`;case X.VIDEO:return`${l}: ${jt[X.VIDEO]}`;case X.EMOJI:return`${l}: ${jt[X.EMOJI]}`;default:return""}},Nr={class:"chat-message","infinite-scroll-immediate":!1},jr=["data-room-id","onClick"],zr={class:"item-wrapper"},Pr={class:"message-info"},Ar={style:{"white-space":"nowrap"}},Dr={class:"person"},Fr={key:0,class:"tag"},Ur={class:"message-message"},Vr={class:"message-time"},Wr=ce({__name:"index",setup(l){const s=Ct(),c=ut();io(()=>{s.getSessionList()});const f=z(()=>c.currentSession),g=z(()=>s.sessionList.map(o=>{var n,r,t,a,p,u,d,v;const i=(t=(r=Array.from(((n=s.messageMap.get(o.roomId))==null?void 0:n.values())||[]))==null?void 0:r.slice(-1))==null?void 0:t[0];let e="";if(i){const _=Zt(i.fromUser.uid);e=((a=i.message)==null?void 0:a.type)===X.RECALL?`${_.value.name}:'撤回了一条消息'`:fo(_.value.name,(p=i.message)==null?void 0:p.type,((d=(u=i.message)==null?void 0:u.body)==null?void 0:d.content)||((v=i.message)==null?void 0:v.body))}return{...o,tag:o.hot_Flag===rs.Yes?"官方":"",lastMsg:e||o.text||"欢迎使用MallChat",lastMsgTime:no(o==null?void 0:o.activeTime)}})),h=(o,i)=>{c.currentSession.roomId=o,c.currentSession.type=i},k=()=>{s.getSessionList()};return(o,i)=>{const e=Rn,n=$n,r=vs;return _e((x(),T("ul",Nr,[(x(!0),T(Ve,null,It(g.value,(t,a)=>(x(),T("li",{key:a,"data-room-id":t.roomId,class:le(["chat-message-item",{active:f.value.roomId===t.roomId}]),onClick:p=>h(t.roomId,t.type)},[O("div",zr,[$(n,{value:t.unreadCount,max:999,hidden:t.unreadCount<1,class:"item"},{default:N(()=>[$(e,{shape:"circle",size:38,src:t.avatar},null,8,["src"])]),_:2},1032,["value","hidden"]),O("div",Pr,[O("div",Ar,[O("span",Dr,te(t.name),1),t.tag?(x(),T("span",Fr,te(t.tag),1)):Y("",!0)]),O("div",Ur,te(t.lastMsg),1)]),O("span",Vr,te(t.lastMsgTime),1)])],10,jr))),128))])),[[r,k]])}}});const Hr=dt(Wr,[["__scopeId","data-v-471fb08d"]]),Gr={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Kr=O("path",{fill:"currentColor",d:"m174.72 855.68l135.296-45.12l23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160S128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8l-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512C64 299.904 256 96 512 96s448 203.904 448 416s-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1),qr=O("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4z"},null,-1),Xr=[Kr,qr];function Yr(l,s){return x(),T("svg",Gr,Xr)}const Zr={name:"ep-chat-dot-round",render:Yr};var mo={exports:{}};const Jr=Ps(Es);(function(l,s){(function(c,f){l.exports=f(Jr)})(typeof self<"u"?self:As,c=>(()=>{var f={9662:(o,i,e)=>{var n=e(614),r=e(6330),t=TypeError;o.exports=function(a){if(n(a))return a;throw t(r(a)+" is not a function")}},6077:(o,i,e)=>{var n=e(614),r=String,t=TypeError;o.exports=function(a){if(typeof a=="object"||n(a))return a;throw t("Can't set "+r(a)+" as a prototype")}},1223:(o,i,e)=>{var n=e(5112),r=e(30),t=e(3070).f,a=n("unscopables"),p=Array.prototype;p[a]==null&&t(p,a,{configurable:!0,value:r(null)}),o.exports=function(u){p[a][u]=!0}},9670:(o,i,e)=>{var n=e(111),r=String,t=TypeError;o.exports=function(a){if(n(a))return a;throw t(r(a)+" is not an object")}},8533:(o,i,e)=>{var n=e(2092).forEach,r=e(9341),t=r("forEach");o.exports=t?[].forEach:function(a){return n(this,a,arguments.length>1?arguments[1]:void 0)}},1318:(o,i,e)=>{var n=e(5656),r=e(1400),t=e(6244),a=function(p){return function(u,d,v){var _,y=n(u),S=t(y),w=r(v,S);if(p&&d!=d){for(;S>w;)if(_=y[w++],_!=_)return!0}else for(;S>w;w++)if((p||w in y)&&y[w]===d)return p||w||0;return!p&&-1}};o.exports={includes:a(!0),indexOf:a(!1)}},2092:(o,i,e)=>{var n=e(9974),r=e(1702),t=e(8361),a=e(7908),p=e(6244),u=e(5417),d=r([].push),v=function(_){var y=_==1,S=_==2,w=_==3,C=_==4,M=_==6,R=_==7,D=_==5||M;return function(Z,V,ee,H){for(var ne,de,L=a(Z),F=t(L),ae=n(V,ee),be=p(F),I=0,A=H||u,J=y?A(Z,be):S||R?A(Z,0):void 0;be>I;I++)if((D||I in F)&&(ne=F[I],de=ae(ne,I,L),_))if(y)J[I]=de;else if(de)switch(_){case 3:return!0;case 5:return ne;case 6:return I;case 2:d(J,ne)}else switch(_){case 4:return!1;case 7:d(J,ne)}return M?-1:w||C?C:J}};o.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6),filterReject:v(7)}},1194:(o,i,e)=>{var n=e(7293),r=e(5112),t=e(7392),a=r("species");o.exports=function(p){return t>=51||!n(function(){var u=[],d=u.constructor={};return d[a]=function(){return{foo:1}},u[p](Boolean).foo!==1})}},9341:(o,i,e)=>{var n=e(7293);o.exports=function(r,t){var a=[][r];return!!a&&n(function(){a.call(null,t||function(){return 1},1)})}},3658:(o,i,e)=>{var n=e(9781),r=e(3157),t=TypeError,a=Object.getOwnPropertyDescriptor,p=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(u){return u instanceof TypeError}}();o.exports=p?function(u,d){if(r(u)&&!a(u,"length").writable)throw t("Cannot set read only .length");return u.length=d}:function(u,d){return u.length=d}},206:(o,i,e)=>{var n=e(1702);o.exports=n([].slice)},7475:(o,i,e)=>{var n=e(3157),r=e(4411),t=e(111),a=e(5112),p=a("species"),u=Array;o.exports=function(d){var v;return n(d)&&(v=d.constructor,r(v)&&(v===u||n(v.prototype))?v=void 0:t(v)&&(v=v[p],v===null&&(v=void 0))),v===void 0?u:v}},5417:(o,i,e)=>{var n=e(7475);o.exports=function(r,t){return new(n(r))(t===0?0:t)}},4326:(o,i,e)=>{var n=e(1702),r=n({}.toString),t=n("".slice);o.exports=function(a){return t(r(a),8,-1)}},648:(o,i,e)=>{var n=e(1694),r=e(614),t=e(4326),a=e(5112),p=a("toStringTag"),u=Object,d=t(function(){return arguments}())=="Arguments",v=function(_,y){try{return _[y]}catch{}};o.exports=n?t:function(_){var y,S,w;return _===void 0?"Undefined":_===null?"Null":typeof(S=v(y=u(_),p))=="string"?S:d?t(y):(w=t(y))=="Object"&&r(y.callee)?"Arguments":w}},9920:(o,i,e)=>{var n=e(2597),r=e(3887),t=e(1236),a=e(3070);o.exports=function(p,u,d){for(var v=r(u),_=a.f,y=t.f,S=0;S<v.length;S++){var w=v[S];n(p,w)||d&&n(d,w)||_(p,w,y(u,w))}}},4964:(o,i,e)=>{var n=e(5112),r=n("match");o.exports=function(t){var a=/./;try{"/./"[t](a)}catch{try{return a[r]=!1,"/./"[t](a)}catch{}}return!1}},8880:(o,i,e)=>{var n=e(9781),r=e(3070),t=e(9114);o.exports=n?function(a,p,u){return r.f(a,p,t(1,u))}:function(a,p,u){return a[p]=u,a}},9114:o=>{o.exports=function(i,e){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:e}}},6135:(o,i,e)=>{var n=e(4948),r=e(3070),t=e(9114);o.exports=function(a,p,u){var d=n(p);d in a?r.f(a,d,t(0,u)):a[d]=u}},8052:(o,i,e)=>{var n=e(614),r=e(3070),t=e(6339),a=e(3072);o.exports=function(p,u,d,v){v||(v={});var _=v.enumerable,y=v.name!==void 0?v.name:u;if(n(d)&&t(d,y,v),v.global)_?p[u]=d:a(u,d);else{try{v.unsafe?p[u]&&(_=!0):delete p[u]}catch{}_?p[u]=d:r.f(p,u,{value:d,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return p}},3072:(o,i,e)=>{var n=e(7854),r=Object.defineProperty;o.exports=function(t,a){try{r(n,t,{value:a,configurable:!0,writable:!0})}catch{n[t]=a}return a}},5117:(o,i,e)=>{var n=e(6330),r=TypeError;o.exports=function(t,a){if(!delete t[a])throw r("Cannot delete property "+n(a)+" of "+n(t))}},9781:(o,i,e)=>{var n=e(7293);o.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(o,i,e)=>{var n=e(7854),r=e(111),t=n.document,a=r(t)&&r(t.createElement);o.exports=function(p){return a?t.createElement(p):{}}},7207:o=>{var i=TypeError,e=9007199254740991;o.exports=function(n){if(n>e)throw i("Maximum allowed index exceeded");return n}},8113:(o,i,e)=>{var n=e(5005);o.exports=n("navigator","userAgent")||""},7392:(o,i,e)=>{var n,r,t=e(7854),a=e(8113),p=t.process,u=t.Deno,d=p&&p.versions||u&&u.version,v=d&&d.v8;v&&(n=v.split("."),r=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!r&&a&&(n=a.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/),n&&(r=+n[1]))),o.exports=r},748:o=>{o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7762:(o,i,e)=>{var n=e(9781),r=e(7293),t=e(9670),a=e(30),p=e(6277),u=Error.prototype.toString,d=r(function(){if(n){var v=a(Object.defineProperty({},"name",{get:function(){return this===v}}));if(u.call(v)!=="true")return!0}return u.call({message:1,name:2})!=="2: 1"||u.call({})!=="Error"});o.exports=d?function(){var v=t(this),_=p(v.name,"Error"),y=p(v.message);return _?y?_+": "+y:_:y}:u},2109:(o,i,e)=>{var n=e(7854),r=e(1236).f,t=e(8880),a=e(8052),p=e(3072),u=e(9920),d=e(4705);o.exports=function(v,_){var y,S,w,C,M,R,D=v.target,Z=v.global,V=v.stat;if(S=Z?n:V?n[D]||p(D,{}):(n[D]||{}).prototype,S)for(w in _){if(M=_[w],v.dontCallGetSet?(R=r(S,w),C=R&&R.value):C=S[w],y=d(Z?w:D+(V?".":"#")+w,v.forced),!y&&C!==void 0){if(typeof M==typeof C)continue;u(M,C)}(v.sham||C&&C.sham)&&t(M,"sham",!0),a(S,w,M,v)}}},7293:o=>{o.exports=function(i){try{return!!i()}catch{return!0}}},2104:(o,i,e)=>{var n=e(4374),r=Function.prototype,t=r.apply,a=r.call;o.exports=typeof Reflect=="object"&&Reflect.apply||(n?a.bind(t):function(){return a.apply(t,arguments)})},9974:(o,i,e)=>{var n=e(1702),r=e(9662),t=e(4374),a=n(n.bind);o.exports=function(p,u){return r(p),u===void 0?p:t?a(p,u):function(){return p.apply(u,arguments)}}},4374:(o,i,e)=>{var n=e(7293);o.exports=!n(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")})},6916:(o,i,e)=>{var n=e(4374),r=Function.prototype.call;o.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},6530:(o,i,e)=>{var n=e(9781),r=e(2597),t=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,p=r(t,"name"),u=p&&(function(){}).name==="something",d=p&&(!n||n&&a(t,"name").configurable);o.exports={EXISTS:p,PROPER:u,CONFIGURABLE:d}},1702:(o,i,e)=>{var n=e(4374),r=Function.prototype,t=r.bind,a=r.call,p=n&&t.bind(a,a);o.exports=n?function(u){return u&&p(u)}:function(u){return u&&function(){return a.apply(u,arguments)}}},5005:(o,i,e)=>{var n=e(7854),r=e(614),t=function(a){return r(a)?a:void 0};o.exports=function(a,p){return arguments.length<2?t(n[a]):n[a]&&n[a][p]}},8173:(o,i,e)=>{var n=e(9662),r=e(8554);o.exports=function(t,a){var p=t[a];return r(p)?void 0:n(p)}},7854:(o,i,e)=>{var n=function(r){return r&&r.Math==Math&&r};o.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof e.g=="object"&&e.g)||function(){return this}()||Function("return this")()},2597:(o,i,e)=>{var n=e(1702),r=e(7908),t=n({}.hasOwnProperty);o.exports=Object.hasOwn||function(a,p){return t(r(a),p)}},3501:o=>{o.exports={}},490:(o,i,e)=>{var n=e(5005);o.exports=n("document","documentElement")},4664:(o,i,e)=>{var n=e(9781),r=e(7293),t=e(317);o.exports=!n&&!r(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!=7})},8361:(o,i,e)=>{var n=e(1702),r=e(7293),t=e(4326),a=Object,p=n("".split);o.exports=r(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return t(u)=="String"?p(u,""):a(u)}:a},9587:(o,i,e)=>{var n=e(614),r=e(111),t=e(7674);o.exports=function(a,p,u){var d,v;return t&&n(d=p.constructor)&&d!==u&&r(v=d.prototype)&&v!==u.prototype&&t(a,v),a}},2788:(o,i,e)=>{var n=e(1702),r=e(614),t=e(5465),a=n(Function.toString);r(t.inspectSource)||(t.inspectSource=function(p){return a(p)}),o.exports=t.inspectSource},9909:(o,i,e)=>{var n,r,t,a=e(4811),p=e(7854),u=e(1702),d=e(111),v=e(8880),_=e(2597),y=e(5465),S=e(6200),w=e(3501),C="Object already initialized",M=p.TypeError,R=p.WeakMap,D=function(L){return t(L)?r(L):n(L,{})},Z=function(L){return function(F){var ae;if(!d(F)||(ae=r(F)).type!==L)throw M("Incompatible receiver, "+L+" required");return ae}};if(a||y.state){var V=y.state||(y.state=new R),ee=u(V.get),H=u(V.has),ne=u(V.set);n=function(L,F){if(H(V,L))throw M(C);return F.facade=L,ne(V,L,F),F},r=function(L){return ee(V,L)||{}},t=function(L){return H(V,L)}}else{var de=S("state");w[de]=!0,n=function(L,F){if(_(L,de))throw M(C);return F.facade=L,v(L,de,F),F},r=function(L){return _(L,de)?L[de]:{}},t=function(L){return _(L,de)}}o.exports={set:n,get:r,has:t,enforce:D,getterFor:Z}},3157:(o,i,e)=>{var n=e(4326);o.exports=Array.isArray||function(r){return n(r)=="Array"}},614:o=>{o.exports=function(i){return typeof i=="function"}},4411:(o,i,e)=>{var n=e(1702),r=e(7293),t=e(614),a=e(648),p=e(5005),u=e(2788),d=function(){},v=[],_=p("Reflect","construct"),y=/^\s*(?:class|function)\b/,S=n(y.exec),w=!y.exec(d),C=function(R){if(!t(R))return!1;try{return _(d,v,R),!0}catch{return!1}},M=function(R){if(!t(R))return!1;switch(a(R)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return w||!!S(y,u(R))}catch{return!0}};M.sham=!0,o.exports=!_||r(function(){var R;return C(C.call)||!C(Object)||!C(function(){R=!0})||R})?M:C},4705:(o,i,e)=>{var n=e(7293),r=e(614),t=/#|\.prototype\./,a=function(_,y){var S=u[p(_)];return S==v||S!=d&&(r(y)?n(y):!!y)},p=a.normalize=function(_){return String(_).replace(t,".").toLowerCase()},u=a.data={},d=a.NATIVE="N",v=a.POLYFILL="P";o.exports=a},8554:o=>{o.exports=function(i){return i==null}},111:(o,i,e)=>{var n=e(614),r=typeof document=="object"&&document.all,t=typeof r>"u"&&r!==void 0;o.exports=t?function(a){return typeof a=="object"?a!==null:n(a)||a===r}:function(a){return typeof a=="object"?a!==null:n(a)}},1913:o=>{o.exports=!1},7850:(o,i,e)=>{var n=e(111),r=e(4326),t=e(5112),a=t("match");o.exports=function(p){var u;return n(p)&&((u=p[a])!==void 0?!!u:r(p)=="RegExp")}},2190:(o,i,e)=>{var n=e(5005),r=e(614),t=e(7976),a=e(3307),p=Object;o.exports=a?function(u){return typeof u=="symbol"}:function(u){var d=n("Symbol");return r(d)&&t(d.prototype,p(u))}},6244:(o,i,e)=>{var n=e(7466);o.exports=function(r){return n(r.length)}},6339:(o,i,e)=>{var n=e(7293),r=e(614),t=e(2597),a=e(9781),p=e(6530).CONFIGURABLE,u=e(2788),d=e(9909),v=d.enforce,_=d.get,y=Object.defineProperty,S=a&&!n(function(){return y(function(){},"length",{value:8}).length!==8}),w=String(String).split("String"),C=o.exports=function(M,R,D){String(R).slice(0,7)==="Symbol("&&(R="["+String(R).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),D&&D.getter&&(R="get "+R),D&&D.setter&&(R="set "+R),(!t(M,"name")||p&&M.name!==R)&&(a?y(M,"name",{value:R,configurable:!0}):M.name=R),S&&D&&t(D,"arity")&&M.length!==D.arity&&y(M,"length",{value:D.arity});try{D&&t(D,"constructor")&&D.constructor?a&&y(M,"prototype",{writable:!1}):M.prototype&&(M.prototype=void 0)}catch{}var Z=v(M);return t(Z,"source")||(Z.source=w.join(typeof R=="string"?R:"")),M};Function.prototype.toString=C(function(){return r(this)&&_(this).source||u(this)},"toString")},4758:o=>{var i=Math.ceil,e=Math.floor;o.exports=Math.trunc||function(n){var r=+n;return(r>0?e:i)(r)}},6277:(o,i,e)=>{var n=e(1340);o.exports=function(r,t){return r===void 0?arguments.length<2?"":t:n(r)}},3929:(o,i,e)=>{var n=e(7850),r=TypeError;o.exports=function(t){if(n(t))throw r("The method doesn't accept regular expressions");return t}},30:(o,i,e)=>{var n,r=e(9670),t=e(6048),a=e(748),p=e(3501),u=e(490),d=e(317),v=e(6200),_=">",y="<",S="prototype",w="script",C=v("IE_PROTO"),M=function(){},R=function(ee){return y+w+_+ee+y+"/"+w+_},D=function(ee){ee.write(R("")),ee.close();var H=ee.parentWindow.Object;return ee=null,H},Z=function(){var ee,H=d("iframe"),ne="java"+w+":";return H.style.display="none",u.appendChild(H),H.src=String(ne),ee=H.contentWindow.document,ee.open(),ee.write(R("document.F=Object")),ee.close(),ee.F},V=function(){try{n=new ActiveXObject("htmlfile")}catch{}V=typeof document<"u"?document.domain&&n?D(n):Z():D(n);for(var ee=a.length;ee--;)delete V[S][a[ee]];return V()};p[C]=!0,o.exports=Object.create||function(ee,H){var ne;return ee!==null?(M[S]=r(ee),ne=new M,M[S]=null,ne[C]=ee):ne=V(),H===void 0?ne:t.f(ne,H)}},6048:(o,i,e)=>{var n=e(9781),r=e(3353),t=e(3070),a=e(9670),p=e(5656),u=e(1956);i.f=n&&!r?Object.defineProperties:function(d,v){a(d);for(var _,y=p(v),S=u(v),w=S.length,C=0;w>C;)t.f(d,_=S[C++],y[_]);return d}},3070:(o,i,e)=>{var n=e(9781),r=e(4664),t=e(3353),a=e(9670),p=e(4948),u=TypeError,d=Object.defineProperty,v=Object.getOwnPropertyDescriptor,_="enumerable",y="configurable",S="writable";i.f=n?t?function(w,C,M){if(a(w),C=p(C),a(M),typeof w=="function"&&C==="prototype"&&"value"in M&&S in M&&!M[S]){var R=v(w,C);R&&R[S]&&(w[C]=M.value,M={configurable:y in M?M[y]:R[y],enumerable:_ in M?M[_]:R[_],writable:!1})}return d(w,C,M)}:d:function(w,C,M){if(a(w),C=p(C),a(M),r)try{return d(w,C,M)}catch{}if("get"in M||"set"in M)throw u("Accessors not supported");return"value"in M&&(w[C]=M.value),w}},1236:(o,i,e)=>{var n=e(9781),r=e(6916),t=e(5296),a=e(9114),p=e(5656),u=e(4948),d=e(2597),v=e(4664),_=Object.getOwnPropertyDescriptor;i.f=n?_:function(y,S){if(y=p(y),S=u(S),v)try{return _(y,S)}catch{}if(d(y,S))return a(!r(t.f,y,S),y[S])}},8006:(o,i,e)=>{var n=e(6324),r=e(748),t=r.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(a){return n(a,t)}},5181:(o,i)=>{i.f=Object.getOwnPropertySymbols},7976:(o,i,e)=>{var n=e(1702);o.exports=n({}.isPrototypeOf)},6324:(o,i,e)=>{var n=e(1702),r=e(2597),t=e(5656),a=e(1318).indexOf,p=e(3501),u=n([].push);o.exports=function(d,v){var _,y=t(d),S=0,w=[];for(_ in y)!r(p,_)&&r(y,_)&&u(w,_);for(;v.length>S;)r(y,_=v[S++])&&(~a(w,_)||u(w,_));return w}},1956:(o,i,e)=>{var n=e(6324),r=e(748);o.exports=Object.keys||function(t){return n(t,r)}},5296:(o,i)=>{var e={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!e.call({1:2},1);i.f=r?function(t){var a=n(this,t);return!!a&&a.enumerable}:e},7674:(o,i,e)=>{var n=e(1702),r=e(9670),t=e(6077);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,p=!1,u={};try{a=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),a(u,[]),p=u instanceof Array}catch{}return function(d,v){return r(d),t(v),p?a(d,v):d.__proto__=v,d}}():void 0)},288:(o,i,e)=>{var n=e(1694),r=e(648);o.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},2140:(o,i,e)=>{var n=e(6916),r=e(614),t=e(111),a=TypeError;o.exports=function(p,u){var d,v;if(u==="string"&&r(d=p.toString)&&!t(v=n(d,p))||r(d=p.valueOf)&&!t(v=n(d,p))||u!=="string"&&r(d=p.toString)&&!t(v=n(d,p)))return v;throw a("Can't convert object to primitive value")}},3887:(o,i,e)=>{var n=e(5005),r=e(1702),t=e(8006),a=e(5181),p=e(9670),u=r([].concat);o.exports=n("Reflect","ownKeys")||function(d){var v=t.f(p(d)),_=a.f;return _?u(v,_(d)):v}},7066:(o,i,e)=>{var n=e(9670);o.exports=function(){var r=n(this),t="";return r.hasIndices&&(t+="d"),r.global&&(t+="g"),r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.dotAll&&(t+="s"),r.unicode&&(t+="u"),r.unicodeSets&&(t+="v"),r.sticky&&(t+="y"),t}},4706:(o,i,e)=>{var n=e(6916),r=e(2597),t=e(7976),a=e(7066),p=RegExp.prototype;o.exports=function(u){var d=u.flags;return d!==void 0||"flags"in p||r(u,"flags")||!t(p,u)?d:n(a,u)}},4488:(o,i,e)=>{var n=e(8554),r=TypeError;o.exports=function(t){if(n(t))throw r("Can't call method on "+t);return t}},7152:(o,i,e)=>{var n=e(7854),r=e(2104),t=e(614),a=e(8113),p=e(206),u=e(8053),d=/MSIE .\./.test(a),v=n.Function,_=function(y){return d?function(S,w){var C=u(arguments.length,1)>2,M=t(S)?S:v(S),R=C?p(arguments,2):void 0;return y(C?function(){r(M,this,R)}:M,w)}:y};o.exports={setTimeout:_(n.setTimeout),setInterval:_(n.setInterval)}},6200:(o,i,e)=>{var n=e(2309),r=e(9711),t=n("keys");o.exports=function(a){return t[a]||(t[a]=r(a))}},5465:(o,i,e)=>{var n=e(7854),r=e(3072),t="__core-js_shared__",a=n[t]||r(t,{});o.exports=a},2309:(o,i,e)=>{var n=e(1913),r=e(5465);(o.exports=function(t,a){return r[t]||(r[t]=a!==void 0?a:{})})("versions",[]).push({version:"3.25.0",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},3111:(o,i,e)=>{var n=e(1702),r=e(4488),t=e(1340),a=e(1361),p=n("".replace),u="["+a+"]",d=RegExp("^"+u+u+"*"),v=RegExp(u+u+"*$"),_=function(y){return function(S){var w=t(r(S));return 1&y&&(w=p(w,d,"")),2&y&&(w=p(w,v,"")),w}};o.exports={start:_(1),end:_(2),trim:_(3)}},6293:(o,i,e)=>{var n=e(7392),r=e(7293);o.exports=!!Object.getOwnPropertySymbols&&!r(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},863:(o,i,e)=>{var n=e(1702);o.exports=n(1 .valueOf)},1400:(o,i,e)=>{var n=e(9303),r=Math.max,t=Math.min;o.exports=function(a,p){var u=n(a);return u<0?r(u+p,0):t(u,p)}},5656:(o,i,e)=>{var n=e(8361),r=e(4488);o.exports=function(t){return n(r(t))}},9303:(o,i,e)=>{var n=e(4758);o.exports=function(r){var t=+r;return t!==t||t===0?0:n(t)}},7466:(o,i,e)=>{var n=e(9303),r=Math.min;o.exports=function(t){return t>0?r(n(t),9007199254740991):0}},7908:(o,i,e)=>{var n=e(4488),r=Object;o.exports=function(t){return r(n(t))}},7593:(o,i,e)=>{var n=e(6916),r=e(111),t=e(2190),a=e(8173),p=e(2140),u=e(5112),d=TypeError,v=u("toPrimitive");o.exports=function(_,y){if(!r(_)||t(_))return _;var S,w=a(_,v);if(w){if(y===void 0&&(y="default"),S=n(w,_,y),!r(S)||t(S))return S;throw d("Can't convert object to primitive value")}return y===void 0&&(y="number"),p(_,y)}},4948:(o,i,e)=>{var n=e(7593),r=e(2190);o.exports=function(t){var a=n(t,"string");return r(a)?a:a+""}},1694:(o,i,e)=>{var n=e(5112),r=n("toStringTag"),t={};t[r]="z",o.exports=String(t)==="[object z]"},1340:(o,i,e)=>{var n=e(648),r=String;o.exports=function(t){if(n(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},6330:o=>{var i=String;o.exports=function(e){try{return i(e)}catch{return"Object"}}},9711:(o,i,e)=>{var n=e(1702),r=0,t=Math.random(),a=n(1 .toString);o.exports=function(p){return"Symbol("+(p===void 0?"":p)+")_"+a(++r+t,36)}},3307:(o,i,e)=>{var n=e(6293);o.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(o,i,e)=>{var n=e(9781),r=e(7293);o.exports=n&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:o=>{var i=TypeError;o.exports=function(e,n){if(e<n)throw i("Not enough arguments");return e}},4811:(o,i,e)=>{var n=e(7854),r=e(614),t=n.WeakMap;o.exports=r(t)&&/native code/.test(String(t))},5112:(o,i,e)=>{var n=e(7854),r=e(2309),t=e(2597),a=e(9711),p=e(6293),u=e(3307),d=r("wks"),v=n.Symbol,_=v&&v.for,y=u?v:v&&v.withoutSetter||a;o.exports=function(S){if(!t(d,S)||!p&&typeof d[S]!="string"){var w="Symbol."+S;p&&t(v,S)?d[S]=v[S]:d[S]=u&&_?_(w):y(w)}return d[S]}},1361:o=>{o.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},9554:(o,i,e)=>{var n=e(2109),r=e(8533);n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},6699:(o,i,e)=>{var n=e(2109),r=e(1318).includes,t=e(7293),a=e(1223),p=t(function(){return!Array(1).includes()});n({target:"Array",proto:!0,forced:p},{includes:function(u){return r(this,u,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2772:(o,i,e)=>{var n=e(2109),r=e(1702),t=e(1318).indexOf,a=e(9341),p=r([].indexOf),u=!!p&&1/p([1],1,-0)<0,d=a("indexOf");n({target:"Array",proto:!0,forced:u||!d},{indexOf:function(v){var _=arguments.length>1?arguments[1]:void 0;return u?p(this,v,_)||0:t(this,v,_)}})},561:(o,i,e)=>{var n=e(2109),r=e(7908),t=e(1400),a=e(9303),p=e(6244),u=e(3658),d=e(7207),v=e(5417),_=e(6135),y=e(5117),S=e(1194),w=S("splice"),C=Math.max,M=Math.min;n({target:"Array",proto:!0,forced:!w},{splice:function(R,D){var Z,V,ee,H,ne,de,L=r(this),F=p(L),ae=t(R,F),be=arguments.length;for(be===0?Z=V=0:be===1?(Z=0,V=F-ae):(Z=be-2,V=M(C(a(D),0),F-ae)),d(F+Z-V),ee=v(L,V),H=0;H<V;H++)ne=ae+H,ne in L&&_(ee,H,L[ne]);if(ee.length=V,Z<V){for(H=ae;H<F-V;H++)ne=H+V,de=H+Z,ne in L?L[de]=L[ne]:y(L,de);for(H=F;H>F-V+Z;H--)y(L,H-1)}else if(Z>V)for(H=F-V;H>ae;H--)ne=H+V-1,de=H+Z-1,ne in L?L[de]=L[ne]:y(L,de);for(H=0;H<Z;H++)L[H+ae]=arguments[H+2];return u(L,F-V+Z),ee}})},3710:(o,i,e)=>{var n=e(1702),r=e(8052),t=Date.prototype,a="Invalid Date",p="toString",u=n(t[p]),d=n(t.getTime);String(new Date(NaN))!=a&&r(t,p,function(){var v=d(this);return v===v?u(this):a})},6647:(o,i,e)=>{var n=e(8052),r=e(7762),t=Error.prototype;t.toString!==r&&n(t,"toString",r)},9653:(o,i,e)=>{var n=e(9781),r=e(7854),t=e(1702),a=e(4705),p=e(8052),u=e(2597),d=e(9587),v=e(7976),_=e(2190),y=e(7593),S=e(7293),w=e(8006).f,C=e(1236).f,M=e(3070).f,R=e(863),D=e(3111).trim,Z="Number",V=r[Z],ee=V.prototype,H=r.TypeError,ne=t("".slice),de=t("".charCodeAt),L=function(J){var K=y(J,"number");return typeof K=="bigint"?K:F(K)},F=function(J){var K,q,Ce,we,Me,xe,$e,Xe,Ie=y(J,"number");if(_(Ie))throw H("Cannot convert a Symbol value to a number");if(typeof Ie=="string"&&Ie.length>2){if(Ie=D(Ie),K=de(Ie,0),K===43||K===45){if(q=de(Ie,2),q===88||q===120)return NaN}else if(K===48){switch(de(Ie,1)){case 66:case 98:Ce=2,we=49;break;case 79:case 111:Ce=8,we=55;break;default:return+Ie}for(Me=ne(Ie,2),xe=Me.length,$e=0;$e<xe;$e++)if(Xe=de(Me,$e),Xe<48||Xe>we)return NaN;return parseInt(Me,Ce)}}return+Ie};if(a(Z,!V(" 0o1")||!V("0b1")||V("+0x1"))){for(var ae,be=function(J){var K=arguments.length<1?0:V(L(J)),q=this;return v(ee,q)&&S(function(){R(q)})?d(Object(K),q,be):K},I=n?w(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;I.length>A;A++)u(V,ae=I[A])&&!u(be,ae)&&M(be,ae,C(V,ae));be.prototype=ee,ee.constructor=be,p(r,Z,be,{constructor:!0})}},1539:(o,i,e)=>{var n=e(1694),r=e(8052),t=e(288);n||r(Object.prototype,"toString",t,{unsafe:!0})},9714:(o,i,e)=>{var n=e(6530).PROPER,r=e(8052),t=e(9670),a=e(1340),p=e(7293),u=e(4706),d="toString",v=RegExp.prototype,_=v[d],y=p(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),S=n&&_.name!=d;(y||S)&&r(RegExp.prototype,d,function(){var w=t(this),C=a(w.source),M=a(u(w));return"/"+C+"/"+M},{unsafe:!0})},2023:(o,i,e)=>{var n=e(2109),r=e(1702),t=e(3929),a=e(4488),p=e(1340),u=e(4964),d=r("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(v){return!!~d(p(a(this)),p(t(v)),arguments.length>1?arguments[1]:void 0)}})},6815:(o,i,e)=>{var n=e(2109),r=e(7854),t=e(7152).setInterval;n({global:!0,bind:!0,forced:r.setInterval!==t},{setInterval:t})},8417:(o,i,e)=>{var n=e(2109),r=e(7854),t=e(7152).setTimeout;n({global:!0,bind:!0,forced:r.setTimeout!==t},{setTimeout:t})},2564:(o,i,e)=>{e(6815),e(8417)},3744:(o,i)=>{i.Z=(e,n)=>{const r=e.__vccOpts||e;for(const[t,a]of n)r[t]=a;return r}},7203:o=>{o.exports=c}},g={};function h(o){var i=g[o];if(i!==void 0)return i.exports;var e=g[o]={exports:{}};return f[o](e,e.exports,h),e.exports}h.d=(o,i)=>{for(var e in i)h.o(i,e)&&!h.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:i[e]})},h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),h.o=(o,i)=>Object.prototype.hasOwnProperty.call(o,i),h.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},h.p="";var k={};return(()=>{if(h.r(k),h.d(k,{ContextMenu:()=>Nn,ContextMenuGroup:()=>jn,ContextMenuItem:()=>xt,ContextMenuSeparator:()=>pe,MenuBar:()=>Fo,default:()=>Vo}),typeof window<"u"){var o=window.document.currentScript,i=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(h.p=i[1])}var e=h(7203),n=null;function r(m){n&&a(),n=m}function t(m){m===n&&(n=null)}function a(){n&&(n.closeMenu(),n=null)}h(6647),h(3710),h(1539),h(9714);var p={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function u(m,E){var B=m.offsetTop;return m.offsetParent!=null&&m.offsetParent!=E&&(B-=m.offsetParent.scrollTop,B+=u(m.offsetParent,E)),B}function d(m,E){var B=m.offsetLeft;return m.offsetParent!=null&&m.offsetParent!=E&&(B-=m.offsetParent.scrollLeft,B+=d(m.offsetParent,E)),B}function v(m,E,B,W){return{x:d(m,W)+E,y:u(m,W)+B}}var _="mx-menu-default-container",y="mx-menu-container-",S=0;function w(m){var E=m.getContainer,B=m.zIndex;if(E){var W=typeof E=="function"?E():E;if(W){var ve=W.getAttribute("id");return ve||(ve=y+S++,W.setAttribute("id",ve)),W.style.zIndex=(B==null?void 0:B.toString())||p.defaultZindex.toString(),{eleId:ve,container:W,isNew:!1}}}var he=document.getElementById(_);return he||(he=document.createElement("div"),he.setAttribute("id",_),he.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(he)),he.style.zIndex=(B==null?void 0:B.toString())||p.defaultZindex.toString(),{eleId:_,container:he,isNew:!0}}function C(m){return typeof m=="number"?"".concat(m,"px"):m}var M=(0,e.defineComponent)({props:{vnode:{type:[Object,Function],default:null},data:{type:Object,default:null}},setup:function(m){var E=(0,e.toRefs)(m),B=E.vnode,W=E.data;return function(){return typeof B.value=="function"?B.value(W.value):B.value}}});function R(m,E,B){return E in m?Object.defineProperty(m,E,{value:B,enumerable:!0,configurable:!0,writable:!0}):m[E]=B,m}function D(m,E){var B=Object.keys(m);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(m);E&&(W=W.filter(function(ve){return Object.getOwnPropertyDescriptor(m,ve).enumerable})),B.push.apply(B,W)}return B}function Z(m){for(var E=1;E<arguments.length;E++){var B=arguments[E]!=null?arguments[E]:{};E%2?D(Object(B),!0).forEach(function(W){R(m,W,B[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(B)):D(Object(B)).forEach(function(W){Object.defineProperty(m,W,Object.getOwnPropertyDescriptor(B,W))})}return m}h(2564);var V={class:"mx-context-menu-scroll",ref:"scroll"};function ee(m,E,B,W,ve,he){var ie=(0,e.resolveComponent)("ContextMenuSeparator"),oe=(0,e.resolveComponent)("ContextSubMenu",!0),fe=(0,e.resolveComponent)("ContextMenuItem"),Oe=(0,e.resolveComponent)("ContextMenuIconRight");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)("mx-context-menu "+(m.options.customClass?m.options.customClass:"")+" "+m.globalTheme),style:(0,e.normalizeStyle)({maxWidth:m.maxWidth?m.solveNumberOrStringSize(m.maxWidth):"".concat(m.constOptions.defaultMaxWidth,"px"),minWidth:m.minWidth?m.solveNumberOrStringSize(m.minWidth):"".concat(m.constOptions.defaultMinWidth,"px"),maxHeight:m.overflow&&m.maxHeight>0?"".concat(m.maxHeight,"px"):void 0,zIndex:m.zIndex,left:"".concat(m.position.x,"px"),top:"".concat(m.position.y,"px")}),"data-type":"ContextSubMenu",onClick:E[2]||(E[2]=function(){return m.onSubMenuBodyClick&&m.onSubMenuBodyClick.apply(m,arguments)})},[(0,e.createElementVNode)("div",{class:"mx-context-menu-items",ref:"menu",style:(0,e.normalizeStyle)({top:"".concat(m.scrollValue,"px")})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.items,function(U,ke){return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:ke},[U.hidden!==!0&&U.divided==="up"?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0})):(0,e.createCommentVNode)("",!0),U.hidden!==!0&&U.divided==="self"?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:1})):((0,e.openBlock)(),(0,e.createBlock)(fe,{key:2,clickHandler:U.onClick?function(Re){return U.onClick(Re)}:void 0,disabled:U.disabled,hidden:U.hidden,icon:U.icon,iconFontClass:U.iconFontClass,svgIcon:U.svgIcon,svgProps:U.svgProps,label:U.label,customRender:U.customRender,customClass:U.customClass,checked:U.checked,shortcut:U.shortcut,clickClose:U.clickClose,clickableWhenHasChildren:U.clickableWhenHasChildren,preserveIconWidth:U.preserveIconWidth!==void 0?U.preserveIconWidth:m.options.preserveIconWidth,showRightArrow:U.children&&U.children.length>0,hasChildren:U.children&&U.children.length>0,rawMenuItem:U,onSubMenuOpen:U.onSubMenuOpen,onSubMenuClose:U.onSubMenuClose},(0,e.createSlots)({_:2},[U.children&&U.children.length>0?{name:"submenu",fn:(0,e.withCtx)(function(){return[(0,e.createVNode)(oe,{items:U.children,maxWidth:U.maxWidth,minWidth:U.minWidth,adjustPosition:U.adjustSubMenuPosition!==void 0?U.adjustSubMenuPosition:m.options.adjustPosition,direction:U.direction!==void 0?U.direction:m.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]}),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),U.hidden===!0||U.divided!=="down"&&U.divided!==!0?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createBlock)(ie,{key:3}))],64)}),128))]})],4),(0,e.createElementVNode)("div",V,[(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable up",onClick:E[0]||(E[0]=function(U){return m.onScroll(!1)})},[(0,e.createVNode)(Oe)],512),[[e.vShow,m.overflow&&m.scrollValue<0]]),(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable down",onClick:E[1]||(E[1]=function(U){return m.onScroll(!0)})},[(0,e.createVNode)(Oe)],512),[[e.vShow,m.overflow&&m.scrollValue>-m.scrollHeight]])],512)],6)}h(9653),h(2772),h(9554),h(561),h(6699),h(2023);var H={key:0,class:"mx-context-menu-item-wrapper",ref:"menuItemRef","data-type":"ContextMenuItem"},ne={class:"mx-item-row"},de=["xlink:href"],L={key:1,class:"label"},F={class:"mx-item-row"},ae={class:"mx-shortcut"};function be(m,E,B,W,ve,he){var ie=(0,e.resolveComponent)("VNodeRender"),oe=(0,e.resolveComponent)("ContextMenuIconCheck"),fe=(0,e.resolveComponent)("ContextMenuIconRight");return m.hidden?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",H,[m.globalHasSlot("itemRender")?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0,vnode:function(){return m.globalRenderSlot("itemRender",m.getItemDataForChildren())}},null,8,["vnode"])):m.customRender?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:1,vnode:m.customRender,data:m.getItemDataForChildren()},null,8,["vnode","data"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:(0,e.normalizeClass)(["mx-context-menu-item",m.disabled?"disabled":"",m.keyBoardFocusMenu?"keyboard-focus":"",m.customClass?" "+m.customClass:"",m.showSubMenu?"open":""]),onClick:E[0]||(E[0]=function(){return m.onClick&&m.onClick.apply(m,arguments)}),onMouseenter:E[1]||(E[1]=function(){return m.onMouseEnter&&m.onMouseEnter.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[(0,e.createElementVNode)("div",ne,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mx-icon-placeholder",m.preserveIconWidth?"preserve-width":""])},[(0,e.renderSlot)(m.$slots,"icon",{},function(){return[m.globalHasSlot("itemIconRender")?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0,vnode:function(){return m.globalRenderSlot("itemIconRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.svgIcon=="string"&&m.svgIcon?((0,e.openBlock)(),(0,e.createElementBlock)("svg",(0,e.mergeProps)({key:1,class:"icon svg"},m.svgProps),[(0,e.createElementVNode)("use",{"xlink:href":m.svgIcon},null,8,de)],16)):typeof m.icon!="string"?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:2,vnode:m.icon,data:m.icon},null,8,["vnode","data"])):typeof m.icon=="string"&&m.icon!==""?((0,e.openBlock)(),(0,e.createElementBlock)("i",{key:3,class:(0,e.normalizeClass)(m.icon+" icon "+m.iconFontClass+" "+m.globalIconFontClass)},null,2)):(0,e.createCommentVNode)("",!0)]}),m.checked?(0,e.renderSlot)(m.$slots,"check",{key:0},function(){return[m.globalHasSlot("itemCheckRender")?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0,vnode:function(){return m.globalRenderSlot("itemCheckRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(oe)]}):(0,e.createCommentVNode)("",!0)],2),(0,e.renderSlot)(m.$slots,"label",{},function(){return[m.globalHasSlot("itemLabelRender")?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0,vnode:function(){return m.globalRenderSlot("itemLabelRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.label=="string"?((0,e.openBlock)(),(0,e.createElementBlock)("span",L,(0,e.toDisplayString)(m.label),1)):((0,e.openBlock)(),(0,e.createBlock)(ie,{key:2,vnode:m.label,data:m.label},null,8,["vnode","data"]))]})]),(0,e.createElementVNode)("div",F,[m.shortcut?(0,e.renderSlot)(m.$slots,"shortcut",{key:0},function(){return[m.globalHasSlot("itemShortcutRender")?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0,vnode:function(){return m.globalRenderSlot("itemShortcutRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("span",ae,(0,e.toDisplayString)(m.shortcut),1)]}):(0,e.createCommentVNode)("",!0),m.showRightArrow?(0,e.renderSlot)(m.$slots,"rightArrow",{key:1},function(){return[m.globalHasSlot("itemRightArrowRender")?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0,vnode:function(){return m.globalRenderSlot("itemRightArrowRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(fe)]}):(0,e.createCommentVNode)("",!0)])]})],34)),m.showSubMenu?(0,e.renderSlot)(m.$slots,"submenu",{key:3}):(0,e.createCommentVNode)("",!0)],512))}var I={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},A=(0,e.createElementVNode)("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),J=[A];function K(m,E){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",I,J)}var q=h(3744);const Ce={},we=(0,q.Z)(Ce,[["render",K]]),Me=we;var xe={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},$e=(0,e.createElementVNode)("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),Xe=[$e];function Ie(m,E){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",xe,Xe)}const nt={},Rt=(0,q.Z)(nt,[["render",Ie]]),Vt=Rt,Bt=(0,e.defineComponent)({name:"ContextMenuItem",components:{VNodeRender:M,ContextMenuIconCheck:Me,ContextMenuIconRight:Vt},props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup:function(m,E){var B=(0,e.toRefs)(m),W=B.clickHandler,ve=B.clickClose,he=B.clickableWhenHasChildren,ie=B.disabled,oe=B.hidden,fe=B.label,Oe=B.icon,U=B.iconFontClass,ke=B.showRightArrow,Re=B.shortcut,We=B.hasChildren,je=(0,e.ref)(!1),se=(0,e.ref)(!1),ue=(0,e.ref)(),ze=(0,e.inject)("globalHasSlot"),Fe=(0,e.inject)("globalRenderSlot"),mt=(0,e.inject)("globalTheme"),me=(0,e.inject)("globalIconFontClass"),Ue=(0,e.inject)("globalClickCloseClassName"),ot=(0,e.inject)("globalIgnoreClickClassName"),st=(0,e.inject)("globalCloseMenu"),Be=(0,e.inject)("menuContext"),He={showSubMenu:function(){return je.value?(Be.markActiveMenuItem(He,!0),!0):!!We.value&&(Ye(),!0)},isDisabledOrHidden:function(){return ie.value||oe.value},getElement:function(){return ue.value},focus:function(){return se.value=!0},blur:function(){return se.value=!1},click:Ge};function Ge(Ne){if(!ie.value){if(Ne){var De=Ne.target;if(De.classList.contains("mx-context-no-clickable")||ot&&De.classList.contains(ot))return;if(Ue&&De.classList.contains(Ue))return Ne.stopPropagation(),void st(m.rawMenuItem)}We.value?he.value?(typeof W.value=="function"&&W.value(Ne),E.emit("click",Ne)):je.value||Ye():(typeof W.value=="function"&&W.value(Ne),E.emit("click",Ne),ve.value&&st(m.rawMenuItem))}}function Ye(Ne){se.value=!1,Be.checkCloseOtherSubMenuTimeOut()||Be.closeOtherSubMenu(),ie.value||(Be.markActiveMenuItem(He),We.value&&(Ne||Be.markThisOpenedByKeyBoard(),Be.addOpenedSubMenu(function(){se.value=!1,je.value=!1,E.emit("subMenuClose")}),je.value=!0,E.emit("subMenuOpen")))}return(0,e.onMounted)(function(){Be.isMenuItemDataCollectedFlag()?(0,e.nextTick)(function(){var Ne=0,De=Be.getElement();if(De)for(var Te=0,Ze=0;Ze<De.children.length;Ze++){var G=De.children[Ze];if(G.getAttribute("data-type")==="ContextMenuItem"){if(G===ue.value){Ne=Te;break}Te++}}Be.addChildMenuItem(He,Ne)}):Be.addChildMenuItem(He)}),(0,e.onBeforeUnmount)(function(){Be.removeChildMenuItem(He)}),{getItemDataForChildren:function(){return{disabled:ie.value,label:fe.value,icon:Oe.value,iconFontClass:U.value,showRightArrow:ke.value,clickClose:ve.value,clickableWhenHasChildren:he.value,shortcut:Re.value,theme:mt,isOpen:je,hasChildren:We,onClick:Ge,onMouseEnter:Ye,closeMenu:st}},showSubMenu:je,keyBoardFocusMenu:se,menuItemRef:ue,globalHasSlot:ze,globalRenderSlot:Fe,globalIconFontClass:me,onMouseEnter:Ye,onClick:Ge}}}),Wt=(0,q.Z)(Bt,[["render",be]]),xt=Wt;var sn={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function rn(m,E,B,W,ve,he){var ie=(0,e.resolveComponent)("VNodeRender");return m.globalHasSlot("separatorRender")?((0,e.openBlock)(),(0,e.createBlock)(ie,{key:0,vnode:function(){return m.globalRenderSlot("separatorRender",{})}},null,8,["vnode"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",sn))}const Q=(0,e.defineComponent)({name:"ContextMenuSperator",components:{VNodeRender:M},setup:function(){var m=(0,e.inject)("globalHasSlot"),E=(0,e.inject)("globalRenderSlot");return{globalHasSlot:m,globalRenderSlot:E}}}),j=(0,q.Z)(Q,[["render",rn]]),pe=j,Le=(0,e.defineComponent)({name:"ContextSubMenu",components:{ContextMenuItem:xt,ContextMenuSeparator:pe,ContextMenuIconRight:Vt},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup:function(m){var E=(0,e.inject)("menuContext"),B=(0,e.inject)("globalOptions"),W=(0,e.inject)("globalHasSlot"),ve=(0,e.inject)("globalRenderSlot"),he=(0,e.inject)("globalTheme"),ie=E.zIndex,oe=E.getParentWidth,fe=E.getParentHeight,Oe=(0,e.toRefs)(m),U=Oe.adjustPosition,ke=(0,e.ref)(),Re=(0,e.ref)(),We=[],je=(0,e.inject)("globalSetCurrentSubMenu"),se=[],ue=null,ze=0;function Fe(){ue&&ue.blur()}function mt(G,ye){if(G){for(var rt=ye!==void 0?ye:0;rt<se.length;rt++)if(!se[rt].isDisabledOrHidden()){me(rt);break}}else for(var _t=ye!==void 0?ye:se.length-1;_t>=0;_t--)if(!se[_t].isDisabledOrHidden()){me(_t);break}}function me(G){if(ue&&Fe(),G!==void 0&&(ue=se[Math.max(0,Math.min(G,se.length-1))]),ue&&(ue.focus(),De.value)){var ye=ue.getElement();ye&&(Ge.value=Math.min(Math.max(-Ye.value,-ye.offsetTop-ye.offsetHeight+Ze.value),0))}}function Ue(){je(ot)}var ot={isTopLevel:function(){return E.getParentContext()===null},closeSelfAndActiveParent:function(){var G=He.getParentContext();if(G){G.closeOtherSubMenu();var ye=G.getSubMenuInstanceContext();if(ye)return ye.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:function(){var G;return(G=He.getParentContext())===null||G===void 0?void 0:G.closeOtherSubMenu()},moveCurrentItemFirst:function(){return mt(!0)},moveCurrentItemLast:function(){return mt(!1)},moveCurrentItemDown:function(){return mt(!0,ue?se.indexOf(ue)+1:0)},moveCurrentItemUp:function(){return mt(!1,ue?se.indexOf(ue)-1:0)},focusCurrentItem:function(){return me()},openCurrentItemSubMenu:function(){var G;return!!ue&&((G=ue)===null||G===void 0?void 0:G.showSubMenu())},triggerCurrentItemClick:function(G){var ye;return(ye=ue)===null||ye===void 0?void 0:ye.click(G)}},st=!1,Be=!1,He={zIndex:ie+1,container:E.container,adjustPadding:B.adjustPadding||p.defaultAdjustPadding,getParentWidth:function(){var G;return((G=ke.value)===null||G===void 0?void 0:G.offsetWidth)||0},getParentHeight:function(){var G;return((G=ke.value)===null||G===void 0?void 0:G.offsetHeight)||0},getParentX:function(){return Te.value.x},getParentY:function(){return Te.value.y},getParentAbsX:function(){return ke.value?d(ke.value,E.container):0},getParentAbsY:function(){return ke.value?u(ke.value,E.container):0},getPositon:function(){return[0,0]},addOpenedSubMenu:function(G){We.push(G)},closeOtherSubMenu:function(){We.forEach(function(G){return G()}),We.splice(0,We.length),je(ot)},checkCloseOtherSubMenuTimeOut:function(){return!!ze&&(clearTimeout(ze),ze=0,!0)},closeOtherSubMenuWithTimeOut:function(){var G=this;ze=setTimeout(function(){ze=0,G.closeOtherSubMenu()},200)},addChildMenuItem:function(G,ye){ye===void 0?se.push(G):se.splice(ye,0,G)},removeChildMenuItem:function(G){se.splice(se.indexOf(G),1)},markActiveMenuItem:function(G){var ye=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Fe(),ue=G,ye&&me()},markThisOpenedByKeyBoard:function(){st=!0},isOpenedByKeyBoardFlag:function(){return!!st&&(st=!1,!0)},isMenuItemDataCollectedFlag:function(){return Be},getElement:function(){return ke.value||null},getParentContext:function(){return E},getSubMenuInstanceContext:function(){return ot}};(0,e.provide)("menuContext",He);var Ge=(0,e.ref)(0),Ye=(0,e.ref)(0);function Ne(G){Ge.value=G?Math.max(Ge.value-50,-Ye.value):Math.min(Ge.value+50,0)}var De=(0,e.ref)(!1),Te=(0,e.ref)({x:0,y:0}),Ze=(0,e.ref)(0);return(0,e.onMounted)(function(){var G,ye,rt,_t,Pn=E.getPositon();Te.value={x:(G=(ye=Pn[0])!==null&&ye!==void 0?ye:B.xOffset)!==null&&G!==void 0?G:0,y:(rt=(_t=Pn[1])!==null&&_t!==void 0?_t:B.yOffset)!==null&&rt!==void 0?rt:0},je(ot),(0,e.nextTick)(function(){var Pe=ke.value;if(Pe&&Re.value){var dn,pn,fn,mn,vn,gn,Et=E.container,hn=(dn=oe==null?void 0:oe())!==null&&dn!==void 0?dn:0,Wo=(pn=fe==null?void 0:fe())!==null&&pn!==void 0?pn:0,Ht=typeof E.adjustPadding=="number"?E.adjustPadding:(fn=(mn=E.adjustPadding)===null||mn===void 0?void 0:mn.x)!==null&&fn!==void 0?fn:0,Gt=typeof E.adjustPadding=="number"?E.adjustPadding:(vn=(gn=E.adjustPadding)===null||gn===void 0?void 0:gn.y)!==null&&vn!==void 0?vn:0,Kt=Wo>0?Gt:0,Ho=document.documentElement.scrollHeight,Go=document.documentElement.scrollWidth,Ko=Math.min(Go,Et.offsetWidth),yn=Math.min(Ho,Et.offsetHeight),_n=d(Pe,Et),bn=u(Pe,Et);m.direction.includes("l")?Te.value.x-=Pe.offsetWidth+Ht:m.direction.includes("r")?Te.value.x+=hn+Ht:(Te.value.x+=hn/2,Te.value.x-=(Pe.offsetWidth+Ht)/2),m.direction.includes("t")?Te.value.y-=Pe.offsetHeight+2*Gt:m.direction.includes("b")?Te.value.y-=Gt:Te.value.y-=(Pe.offsetHeight+Gt)/2,U.value&&(0,e.nextTick)(function(){_n=d(Pe,Et),bn=u(Pe,Et);var qo=_n+Pe.offsetWidth-Ko,An=bn+Pe.offsetHeight-yn;if(Ye.value=Pe.offsetHeight-yn-2*Kt,De.value=An>0,qo>0){var Dn=hn+Pe.offsetWidth-Ht,Fn=_n;Te.value.x-=Dn>Fn?Fn:Dn}if(De.value){var Un=An,Vn=bn;Te.value.y-=Un>Vn?Vn-Kt:Un-2*Kt,Ze.value=yn-2*Kt}else Ze.value=0})}Pe==null||Pe.focus({preventScroll:!0}),E.isOpenedByKeyBoardFlag()&&mt(!0),Be=!0})}),{menu:ke,scroll:Re,options:B,zIndex:ie,constOptions:p,scrollValue:Ge,overflow:De,position:Te,scrollHeight:Ye,maxHeight:Ze,globalHasSlot:W,globalRenderSlot:ve,globalTheme:he,onScroll:Ne,onSubMenuBodyClick:Ue,solveNumberOrStringSize:C}}}),Se=(0,q.Z)(Le,[["render",ee]]),Nt=Se,an=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},setup:function(m,E){var B,W,ve,he,ie=(0,e.toRefs)(m),oe=ie.options,fe=ie.show,Oe=ie.container;(0,e.onMounted)(function(){fe&&ke()}),(0,e.onBeforeUnmount)(function(){je()}),(0,e.watch)(fe,function(me){me?ke():je()});var U={closeMenu:Re};function ke(){We(),r(U)}function Re(me){E.emit("update:show",!1),E.emit("close",me),t(U)}function We(){setTimeout(function(){document.addEventListener("click",Fe,!0),document.addEventListener("contextmenu",Fe,!0),document.addEventListener("scroll",ze,!0),!m.isFullScreenContainer&&Oe.value&&Oe.value.addEventListener("scroll",ze,!0),oe.value.keyboardControl!==!1&&document.addEventListener("keydown",ue)},50)}function je(){document.removeEventListener("contextmenu",Fe,!0),document.removeEventListener("click",Fe,!0),document.removeEventListener("scroll",ze,!0),!m.isFullScreenContainer&&Oe.value&&Oe.value.removeEventListener("scroll",ze,!0),oe.value.keyboardControl!==!1&&document.removeEventListener("keydown",ue)}E.expose({closeMenu:Re});var se=(0,e.ref)();function ue(me){var Ue,ot,st,Be,He,Ge,Ye,Ne,De=!0;switch(me.key){case"Escape":var Te,Ze;((Te=se.value)===null||Te===void 0?void 0:Te.isTopLevel())===!1?(Ze=se.value)===null||Ze===void 0||Ze.closeCurrentSubMenu():Re();break;case"ArrowDown":(Ue=se.value)===null||Ue===void 0||Ue.moveCurrentItemDown();break;case"ArrowUp":(ot=se.value)===null||ot===void 0||ot.moveCurrentItemUp();break;case"Home":(st=se.value)===null||st===void 0||st.moveCurrentItemFirst();break;case"End":(Be=se.value)===null||Be===void 0||Be.moveCurrentItemLast();break;case"ArrowLeft":var G,ye,rt;(G=se.value)!==null&&G!==void 0&&G.closeSelfAndActiveParent()||(ye=(rt=oe.value).onKeyFocusMoveLeft)===null||ye===void 0||ye.call(rt);break;case"ArrowRight":(He=se.value)!==null&&He!==void 0&&He.openCurrentItemSubMenu()||(Ge=(Ye=oe.value).onKeyFocusMoveRight)===null||Ge===void 0||Ge.call(Ye);break;case"Enter":(Ne=se.value)===null||Ne===void 0||Ne.triggerCurrentItemClick(me);break;default:De=!1;break}De&&se.value&&(me.stopPropagation(),me.preventDefault())}function ze(){oe.value.closeWhenScroll!==!1&&Re()}function Fe(me){mt(me.target)}function mt(me){for(;me;){if(me.classList&&me.classList.contains("mx-menu-host"))return;me=me.parentNode}je(),Re()}return(0,e.provide)("globalSetCurrentSubMenu",function(me){return se.value=me}),(0,e.provide)("globalOptions",oe.value),(0,e.provide)("globalCloseMenu",Re),(0,e.provide)("globalTheme",((B=oe.value)===null||B===void 0?void 0:B.theme)||"light"),(0,e.provide)("globalIsFullScreenContainer",m.isFullScreenContainer),(0,e.provide)("globalClickCloseClassName",(W=oe.value)===null||W===void 0?void 0:W.clickCloseClassName),(0,e.provide)("globalIgnoreClickClassName",(ve=oe.value)===null||ve===void 0?void 0:ve.ignoreClickClassName),(0,e.provide)("globalIconFontClass",((he=oe.value)===null||he===void 0?void 0:he.iconFontClass)||"iconfont"),(0,e.provide)("globalHasSlot",function(me){return E.slots[me]!==void 0}),(0,e.provide)("globalRenderSlot",function(me,Ue){return(0,e.renderSlot)(E.slots,me,Z({},Ue),function(){return[(0,e.h)("span","Render slot failed")]},!1)}),(0,e.provide)("menuContext",{zIndex:oe.value.zIndex||p.defaultZindex,container:Oe.value,adjustPadding:{x:0,y:0},getParentAbsY:function(){return oe.value.x},getParentAbsX:function(){return oe.value.y},getParentX:function(){return 0},getParentY:function(){return 0},getParentWidth:function(){return 0},getParentHeight:function(){return 0},getPositon:function(){return[oe.value.x,oe.value.y]},closeOtherSubMenuWithTimeOut:function(){},checkCloseOtherSubMenuTimeOut:function(){return!1},addOpenedSubMenu:function(){},closeOtherSubMenu:function(){},getParentContext:function(){return null},getSubMenuInstanceContext:function(){return null},getElement:function(){return null},addChildMenuItem:function(){},removeChildMenuItem:function(){},markActiveMenuItem:function(){},markThisOpenedByKeyBoard:function(){},isOpenedByKeyBoardFlag:function(){return!1},isMenuItemDataCollectedFlag:function(){return!1}}),function(){var me,Ue;return fe.value?[(0,e.h)("div",{class:"mx-menu-ghost-host"},[(0,e.h)(Nt,{class:"mx-menu-host",items:(me=oe.value)===null||me===void 0?void 0:me.items,adjustPosition:(Ue=oe.value)===null||Ue===void 0?void 0:Ue.adjustPosition,maxWidth:oe.value.maxWidth||p.defaultMaxWidth,minWidth:oe.value.minWidth||p.defaultMinWidth,direction:oe.value.direction||p.defaultDirection},{default:E.slots.default})])]:[]}}}),ln=an,ge=ln,pt=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup:function(m,E){var B=(0,e.toRefs)(m),W=B.options,ve=B.show;return E.expose({closeMenu:function(){return E.emit("update:show",!1)}}),function(){var he=w(W.value),ie=he.isNew,oe=he.container,fe=he.eleId,Oe=ve.value?[(0,e.h)(ge,{options:W,show:!0,container:oe,isFullScreenContainer:!ie,"onUpdate:show":function(U){return E.emit("update:show",U)},onClose:function(U){var ke,Re;E.emit("update:show",!1),E.emit("close"),(ke=(Re=W.value).onClose)===null||ke===void 0||ke.call(Re,U)}},E.slots)]:[];return[(0,e.h)(e.Teleport,{to:"#".concat(fe)},Oe)]}}}),Co=pt,Nn=Co;function cn(m){return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},cn(m)}const xo=(0,e.defineComponent)({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup:function(m,E){var B=(0,e.inject)("globalOptions"),W=(0,e.toRefs)(m),ve=W.adjustSubMenuPosition,he=W.maxWidth,ie=W.minWidth,oe=typeof ve.value<"u"?ve.value:B.adjustPosition;return function(){return(0,e.h)(xt,Z(Z({},m),{},{showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:cn(E.slots.default)!==void 0}),E.slots.default?{submenu:function(){return(0,e.h)(Nt,{maxWidth:he.value,minWidth:ie.value,adjustPosition:oe},{default:E.slots.default})}}:void 0)}}}),So=xo,jn=So;function wo(m,E,B,W){var ve=(0,e.h)(ge,{options:m,show:!0,container:E,isFullScreenContainer:!B,onClose:function(he){var ie;(0,e.render)(null,E),(ie=m.onClose)===null||ie===void 0||ie.call(m,he)}},W);return(0,e.render)(ve,E),ve.component}function zn(m,E){var B=w(m),W=wo(m,B.container,B.isNew,E);return W.exposed}const un={install:function(m){m.config.globalProperties.$contextmenu=zn,m.component("ContextMenu",Nn),m.component("ContextMenuItem",xt),m.component("ContextMenuGroup",jn),m.component("ContextMenuSperator",pe),m.component("ContextMenuSeparator",pe),m.component("ContextSubMenu",Nt)},showContextMenu:function(m,E){return zn(m,E)},closeContextMenu:a,transformMenuPosition:v};var Io={key:0,ref:"menuBarContent",class:"mx-menu-bar-content"},Mo={key:1,ref:"menuBarContent",class:"mx-menu-bar-content"},Eo=["onClick","onMouseenter"];function $o(m,E,B,W,ve,he){var ie,oe=(0,e.resolveComponent)("MenuBarIconMenu");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["mx-menu-bar",(ie=m.options.theme)!==null&&ie!==void 0?ie:"",m.options.mini?"mini":""]),onFocus:E[1]||(E[1]=function(){return m.onFocus&&m.onFocus.apply(m,arguments)}),onBlur:E[2]||(E[2]=function(){return m.onBlur&&m.onBlur.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"prefix"),m.options.mini?((0,e.openBlock)(),(0,e.createElementBlock)("div",Io,[(0,e.createElementVNode)("div",{class:"mx-menu-bar-item",onClick:E[0]||(E[0]=function(fe){return m.onItemClick(0,null)})},[(0,e.createVNode)(oe)])],512)):((0,e.openBlock)(),(0,e.createElementBlock)("div",Mo,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.menuItems,function(fe,Oe){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:Oe,class:(0,e.normalizeClass)(["mx-menu-bar-item",fe==m.menuActive?"active":""]),onClick:function(U){return m.onItemClick(Oe,fe)},onMouseenter:function(U){return m.onItemEnter(Oe,fe)}},(0,e.toDisplayString)(fe.label),43,Eo)}),128))],512)),(0,e.renderSlot)(m.$slots,"suffix")],34)}var Oo={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},To=(0,e.createElementVNode)("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),Lo=(0,e.createElementVNode)("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),Ro=(0,e.createElementVNode)("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1),Bo=[To,Lo,Ro];function No(m,E){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",Oo,Bo)}const jo={},zo=(0,q.Z)(jo,[["render",No]]),Po=zo,Ao=(0,e.defineComponent)({name:"MenuBar",emits:[],props:{options:{type:Object,default:null}},components:{MenuBarIconMenu:Po},setup:function(m){var E=(0,e.ref)(),B=(0,e.ref)(!1),W=(0,e.ref)([]),ve=(0,e.ref)(null);function he(){B.value=!0}function ie(){B.value=!1}(0,e.onMounted)(function(){W.value=m.options.items||[]}),(0,e.watch)(function(){return m.options},function(){W.value=m.options.items||[]});var oe=null,fe=-1;function Oe(){fe<W.value.length-1?fe++:fe=0,ke(fe,W.value[fe])}function U(){fe>0?fe--:fe=W.value.length-1,ke(fe,W.value[fe])}function ke(se,ue){var ze;if(fe=se,ue.children){oe&&(oe.closeMenu(),oe=null,B.value=!0),ve.value=ue;var Fe=(ze=E.value)===null||ze===void 0?void 0:ze.children[se];Fe&&(oe=un.showContextMenu(Z(Z({},m.options),{},{items:ue.children,x:d(Fe),y:u(Fe)+Fe.offsetHeight,onKeyFocusMoveLeft:function(){U()},onKeyFocusMoveRight:function(){Oe()},onClose:function(){ve.value==ue&&(B.value=!1,ve.value=null)}})))}}function Re(){fe=0;var se=E.value;se&&(oe=un.showContextMenu(Z(Z({},m.options),{},{x:d(se),y:u(se)+se.offsetHeight})))}function We(se,ue){ue?(B.value=!0,ke(se,ue),ue.onClick&&(ue.clickableWhenHasChildren===!0&&ue.children&&ue.children.length>0||!ue.children||ue.children.length===0)&&ue.onClick()):Re()}function je(se,ue){B.value&&ke(se,ue)}return{menuItems:W,menuActive:ve,menuBarContent:E,menuBarActive:B,onFocus:he,onBlur:ie,onItemClick:We,onItemEnter:je}}}),Do=(0,q.Z)(Ao,[["render",$o]]),Fo=Do,Uo=un,Vo=Uo})(),k})())})(mo);var Ae=mo.exports;const Qr=O("span",{class:"icon"},"@",-1),ea=ce({__name:"index",props:{uid:{},options:{}},setup(l){var a;const s=l,c=lo(s.uid),f=(a=ht())==null?void 0:a.userInfo,g=ut(),h=Ft(),k=z(()=>h.countInfo),o=z(()=>(f==null?void 0:f.uid)===c.value),i=z(()=>(f==null?void 0:f.power)===oo.ADMIN),e=(p,u)=>it.emit("onSelectPerson",{uid:p,ignoreCheck:u}),n=async()=>{const p=s.uid;p&&await ct.blockUser({uid:p}).send()},r=async()=>{g.addFriendModalInfo.show=!0,g.addFriendModalInfo.uid=s.uid},t=async()=>{await ct.removeGroupMember({uid:s.uid,roomId:g.currentSession.roomId}).send(),h.getGroupUserList(!0)};return(p,u)=>{const d=tt,v=vt("login-show"),_=vt("friends");return x(),re(b(Ae.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:N(()=>[_e((x(),re(b(Ae.ContextMenuItem),{label:"艾特Ta",onClick:u[0]||(u[0]=y=>e==null?void 0:e(s.uid,!0))},{icon:N(()=>[Qr]),_:1})),[[v]]),i.value?(x(),re(b(Ae.ContextMenuItem),{key:0,label:"拉黑(管理)",onClick:n},{icon:N(()=>[$(d,{icon:"lahei",size:13})]),_:1})):Y("",!0),_e((x(),re(b(Ae.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:r},{icon:N(()=>[$(d,{icon:"tianjia",size:13})]),_:1})),[[_,c.value]]),[b(Tt).LORD,b(Tt).ADMIN].includes(k.value.role)&&!o.value?(x(),re(b(Ae.ContextMenuItem),{key:1,vLoginShow:"",label:"剔出群聊",onClick:t},{icon:N(()=>[$(d,{icon:"yichu",size:13})]),_:1})):Y("",!0)]),_:1},8,["options"])}}});const ta={[Tt.LORD]:{text:"群主",class:"lord"},[Tt.ADMIN]:{text:"管理员",class:"admin"}},na={class:"user-name"},oa={class:"text"},sa=ce({__name:"index",props:{user:{}},setup(l){var i;const s=l,c=lo(s.user),f=Zt((i=c.value)==null?void 0:i.uid),g=P(!1),h=P({x:0,y:0}),k=e=>{if(!ht().isSign)return;const{x:n,y:r}=e;h.value.x=n,h.value.y=r,g.value=!0},o=z(()=>s.user.roleId?ta[s.user.roleId]:"");return(e,n)=>{var t;const r=Jt;return x(),T("li",{class:"user-list-item",tabindex:"0",key:e.user.uid,onContextmenu:n[1]||(n[1]=St(a=>k(a),["prevent","stop"]))},[$(r,{src:b(f).avatar,size:24,showStatus:"",online:e.user.activeStatus===b(as).ONLINE},null,8,["src","online"]),O("div",na,[O("div",oa,te(b(f).name),1),o.value?(x(),T("div",{key:0,class:le(["badge flex-center",o.value.class])},te(o.value.text),3)):Y("",!0)]),$(ea,{show:g.value,"onUpdate:show":n[0]||(n[0]=a=>g.value=a),options:h.value,uid:(t=e.user)==null?void 0:t.uid},null,8,["show","options","uid"])],32)}}});const ra=dt(sa,[["__scopeId","data-v-b51154b2"]]),aa={class:"user-list-box"},ia={class:"user-list-header"},la={key:0,class:"list-no-data"},ca=ce({__name:"index",setup(l){const s=P(),c=Ft(),f=ut(),g=On(),h=z(()=>c.userList),k=z(()=>c.countInfo);yt(()=>{let e;tn(()=>{e=new IntersectionObserver(async n=>{var r;(r=n==null?void 0:n[0])!=null&&r.isIntersecting&&(await c.loadMore(),s.value&&e.unobserve(s.value),setTimeout(()=>{s.value&&e.observe(s.value)},500))}),s.value&&e.observe(s.value)}),Bn(()=>{s.value&&e.unobserve(s.value)})});const o=()=>c.showGroupList=!1,i=()=>{f.createGroupModalInfo.show=!0,f.createGroupModalInfo.isInvite=!0,f.createGroupModalInfo.selectedUid=g.currentAtUsersList.map(e=>e.uid)};return(e,n)=>{var p,u;const r=Lt,t=vt("login-show"),a=bs;return x(),T("div",aa,[O("div",{class:le(["user-list-mask",b(c).showGroupList?"show":""]),onClick:o},null,2),O("div",{class:le(["user-list-wrapper",b(c).showGroupList?"show":""])},[O("div",ia,[Ee(" 在线人数："+te(k.value.onlineNum||0)+" ",1),_e($(r,{type:"primary",icon:b(is),circle:"",disabled:k.value.role===b(Tt).REMOVED,size:"small",onClick:i},null,8,["icon","disabled"]),[[t]])]),_e((x(),re($s,{tag:"ul",name:"fade",class:"user-list"},{default:N(()=>[(x(!0),T(Ve,null,It(h.value,d=>(x(),re(ra,{key:d.uid,user:d},null,8,["user"]))),128)),O("li",{key:"visible_el",ref_key:"groupListLastElRef",ref:s}," ",512)]),_:1})),[[Ke,(p=h.value)==null?void 0:p.length],[a,b(c).userListOptions.loading,void 0,{lock:!0}]]),((u=h.value)==null?void 0:u.length)===0?(x(),T("div",la,"暂无成员~")):Y("",!0)],2)])}}});const ua=dt(ca,[["__scopeId","data-v-37307653"]]),da={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},pa=O("path",{fill:"currentColor",d:"M104.704 338.752a64 64 0 0 1 90.496 0l316.8 316.8l316.8-316.8a64 64 0 0 1 90.496 90.496L557.248 791.296a64 64 0 0 1-90.496 0L104.704 429.248a64 64 0 0 1 0-90.496z"},null,-1),fa=[pa];function ma(l,s){return x(),T("svg",da,fa)}const va={name:"ep-arrow-down-bold",render:ma},ga={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ha=O("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),ya=[ha];function _a(l,s){return x(),T("svg",ga,ya)}const ba={name:"ep-loading",render:_a};var ka=ls,Ca=function(){return ka.Date.now()},xa=Ca,Sa=/\s/;function wa(l){for(var s=l.length;s--&&Sa.test(l.charAt(s)););return s}var Ia=wa,Ma=Ia,Ea=/^\s+/;function $a(l){return l&&l.slice(0,Ma(l)+1).replace(Ea,"")}var Oa=$a,Ta=cs,La=us,Ra="[object Symbol]";function Ba(l){return typeof l=="symbol"||La(l)&&Ta(l)==Ra}var Na=Ba,ja=Oa,Yn=Tn,za=Na,Zn=0/0,Pa=/^[-+]0x[0-9a-f]+$/i,Aa=/^0b[01]+$/i,Da=/^0o[0-7]+$/i,Fa=parseInt;function Ua(l){if(typeof l=="number")return l;if(za(l))return Zn;if(Yn(l)){var s=typeof l.valueOf=="function"?l.valueOf():l;l=Yn(s)?s+"":s}if(typeof l!="string")return l===0?l:+l;l=ja(l);var c=Aa.test(l);return c||Da.test(l)?Fa(l.slice(2),c?2:8):Pa.test(l)?Zn:+l}var Va=Ua,Wa=Tn,xn=xa,Jn=Va,Ha="Expected a function",Ga=Math.max,Ka=Math.min;function qa(l,s,c){var f,g,h,k,o,i,e=0,n=!1,r=!1,t=!0;if(typeof l!="function")throw new TypeError(Ha);s=Jn(s)||0,Wa(c)&&(n=!!c.leading,r="maxWait"in c,h=r?Ga(Jn(c.maxWait)||0,s):h,t="trailing"in c?!!c.trailing:t);function a(C){var M=f,R=g;return f=g=void 0,e=C,k=l.apply(R,M),k}function p(C){return e=C,o=setTimeout(v,s),n?a(C):k}function u(C){var M=C-i,R=C-e,D=s-M;return r?Ka(D,h-R):D}function d(C){var M=C-i,R=C-e;return i===void 0||M>=s||M<0||r&&R>=h}function v(){var C=xn();if(d(C))return _(C);o=setTimeout(v,u(C))}function _(C){return o=void 0,t&&f?a(C):(f=g=void 0,k)}function y(){o!==void 0&&clearTimeout(o),e=0,f=i=g=o=void 0}function S(){return o===void 0?k:_(xn())}function w(){var C=xn(),M=d(C);if(f=arguments,g=this,i=C,M){if(o===void 0)return p(i);if(r)return clearTimeout(o),o=setTimeout(v,s),a(i)}return o===void 0&&(o=setTimeout(v,s)),k}return w.cancel=y,w.flush=S,w}var Xa=qa,Ya=Xa,Za=Tn,Ja="Expected a function";function Qa(l,s,c){var f=!0,g=!0;if(typeof l!="function")throw new TypeError(Ja);return Za(c)&&(f="leading"in c?!!c.leading:f,g="trailing"in c?!!c.trailing:g),Ya(l,s,{leading:f,maxWait:s,trailing:g})}var ei=Qa;const vo=Ds(ei);class ti{constructor(s,c){kn(this,"sizes",new Map);kn(this,"offset");this.init(s,c)}init(s,c){this.param=s,this.callUpdate=c,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType="INIT",this.offset=0,this.direction="",this.range=Object.create(null),s&&this.checkRange(0,s.keeps-1)}destroy(){this.init(null,null)}getRange(){const s=Object.create(null);return s.start=this.range.start,s.end=this.range.end,s.padFront=this.range.padFront,s.padBehind=this.range.padBehind,s}isBehind(){return this.direction==="BEHIND"}isFront(){return this.direction==="FRONT"}getOffset(s){return(s<1?0:this.getIndexOffset(s))+this.param.slotHeaderSize}updateParam(s,c){this.param&&s in this.param&&(s==="uniqueIds"&&this.sizes.forEach((f,g)=>{c.includes(g)||this.sizes.delete(g)}),this.param[s]=c)}saveSize(s,c){this.sizes.set(s,c),this.calcType==="INIT"?(this.fixedSizeValue=c,this.calcType="FIXED"):this.calcType==="FIXED"&&this.fixedSizeValue!==c&&(this.calcType="DYNAMIC",delete this.fixedSizeValue),this.calcType!=="FIXED"&&typeof this.firstRangeTotalSize<"u"&&(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)?(this.firstRangeTotalSize=[...this.sizes.values()].reduce((f,g)=>f+g,0),this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)):delete this.firstRangeTotalSize)}handleDataSourcesChange(){let s=this.range.start;this.isFront()?s=s-2:this.isBehind()&&(s=s+2),s=Math.max(s,0),this.updateRange(this.range.start,this.getEndByStart(s))}handleSlotSizeChange(){this.handleDataSourcesChange()}handleScroll(s){this.direction=s<this.offset?"FRONT":"BEHIND",this.offset=s,this.param&&(this.direction==="FRONT"?this.handleFront():this.direction==="BEHIND"&&this.handleBehind())}handleFront(){const s=this.getScrollOvers();if(s>this.range.start)return;const c=Math.max(s-this.param.buffer,0);this.checkRange(c,this.getEndByStart(c))}handleBehind(){const s=this.getScrollOvers();s<this.range.start+this.param.buffer||this.checkRange(s,this.getEndByStart(s))}getScrollOvers(){const s=this.offset-this.param.slotHeaderSize;if(s<=0)return 0;if(this.isFixedType())return Math.floor(s/this.fixedSizeValue);let c=0,f=0,g=0,h=this.param.uniqueIds.length;for(;c<=h;){if(f=c+Math.floor((h-c)/2),g=this.getIndexOffset(f),g===s)return f;g<s?c=f+1:g>s&&(h=f-1)}return c>0?--c:0}getIndexOffset(s){if(!s)return 0;let c=0,f=0;for(let g=0;g<s;g++)f=this.sizes.get(this.param.uniqueIds[g]),c=c+(typeof f=="number"?f:this.getEstimateSize());return this.lastCalcIndex=Math.max(this.lastCalcIndex,s-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),c}isFixedType(){return this.calcType==="FIXED"}getLastIndex(){return this.param.uniqueIds.length-1}checkRange(s,c){const f=this.param.keeps;this.param.uniqueIds.length<=f?(s=0,c=this.getLastIndex()):c-s<f-1&&(s=c-f+1),this.range.start!==s&&this.updateRange(s,c)}updateRange(s,c){this.range.start=s,this.range.end=c,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}getEndByStart(s){const c=s+this.param.keeps-1;return Math.min(c,this.getLastIndex())}getPadFront(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}getPadBehind(){const s=this.range.end,c=this.getLastIndex();return this.isFixedType()?(c-s)*this.fixedSizeValue:this.lastCalcIndex===c?this.getIndexOffset(c)-this.getIndexOffset(s):(c-s)*this.getEstimateSize()}getEstimateSize(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}const ni=ce({name:"VirtualListItem",props:{index:{type:Number},source:{type:Object},component:{type:[Object,Function]},uniqueKey:{type:[String,Number]},itemProps:{type:Object,default:()=>{}},dataPropName:{type:String,default:"source"}},emits:["itemResize"],setup(l,{emit:s}){const c=P(null);let f=null;const g=()=>{const{uniqueKey:h}=l,k=c.value?c.value.offsetHeight:0;s("itemResize",h,k)};return yt(()=>{typeof ResizeObserver<"u"&&(f=new ResizeObserver(()=>{g()}),c.value&&f.observe(c.value))}),Os(()=>{g()}),Bn(()=>{f&&(f.disconnect(),f=null)}),()=>{const{component:h,index:k,source:o,uniqueKey:i,itemProps:e,dataPropName:n}=l,r={...e,index:k,[n]:o};return $("div",Ut({key:i,ref:c},{index:k}),[$(h,r,null)])}}}),go=ce({name:"VirtualList",props:{data:{type:Array,required:!0,default:()=>[]},dataKey:{type:[String,Function],required:!0},item:{type:[Object,Function],required:!0},keeps:{type:Number,default:30},size:{type:Number,default:50},start:{type:Number,default:0},offset:{type:Number,default:0},topThreshold:{type:Number,default:0},bottomThreshold:{type:Number,default:0},itemProps:{type:Object},dataPropName:{type:String,default:"source"}},setup(l,{emit:s,expose:c}){const f=P(null),g=P(),h=P(null);let k;at(()=>l.data.length,()=>{k.updateParam("uniqueIds",a()),k.handleDataSourcesChange()}),at(()=>l.keeps,C=>{k.updateParam("keeps",C),k.handleSlotSizeChange()}),at(()=>l.start,C=>{d(C)}),at(()=>l.offset,C=>v(C));const o=C=>k.sizes.get(C),i=()=>g.value?Math.ceil(g.value.scrollTop):0,e=()=>{const C="clientHeight";return g.value?Math.ceil(g.value[C]):0},n=()=>{const C="scrollHeight";return g.value?Math.ceil(g.value[C]):0},r=(C,M,R)=>{s("scroll",{offset:C,clientSize:M,scrollSize:R}),k.isFront()&&l.data.length&&C-l.topThreshold<=0?s("totop"):k.isBehind()&&C+M+l.bottomThreshold>=R&&s("tobottom")},t=()=>{const C=i(),M=e(),R=n();C<0||C+M>R+1||!R||(k.handleScroll(C),r(C,M,R))},a=()=>{const{dataKey:C,data:M=[]}=l;return M.map(R=>typeof C=="function"?C(R):R[C])},p=C=>{f.value=C},u=()=>{k=new ti({slotHeaderSize:0,slotFooterSize:0,keeps:l.keeps,estimateSize:l.size,buffer:Math.round(l.keeps/3),uniqueIds:a()},p),f.value=k.getRange()},d=(C,M,R=0)=>{if(C>=l.data.length-1)S();else{const D=k.getOffset(C)-R;v(D,M)}},v=(C,M=!1)=>{g.value&&g.value.scroll({left:0,top:C,behavior:M?"smooth":"auto"})},_=()=>{const C=[],{start:M,end:R}=f.value,{data:D,dataKey:Z,item:V,itemProps:ee,dataPropName:H}=l;for(let ne=M;ne<=R;ne++){const de=D[ne];if(de){const L=typeof Z=="function"?Z(de):de[Z];(typeof L=="string"||typeof L=="number")&&C.push($(ni,{index:ne,uniqueKey:L,source:de,component:V,itemProps:ee,dataPropName:H,onItemResize:y},null))}}return C},y=(C,M)=>{k.saveSize(C,M),s("resized",C,M)},S=C=>{if(h.value){const M=h.value.offsetTop;v(M,C),setTimeout(()=>{i()+e()<n()&&S(C)},3)}},w=()=>k.sizes.size;return io(()=>{u()}),Ts(()=>{v(k.offset)}),yt(()=>{l.start?d(l.start):l.offset&&v(l.offset),s("ok")}),Bn(()=>{k.destroy()}),c({scrollToBottom:S,getSizes:w,getSize:o,getOffset:i,getScrollSize:n,getClientSize:e,scrollToOffset:v,scrollToIndex:d}),()=>{const{padFront:C,padBehind:M}=f.value;return $("div",{ref:g,onScroll:t},[$("div",{style:{padding:`${C}px 0px ${M}px`}},[_()]),$("div",{ref:h,style:{width:"100%",height:"0px"}},null)])}}}),oi=l=>{if(l===0||!l)return"0 B";const s=["B","KB","MB","GB","TB"],c=1024,f=Math.floor(Math.log(l)/Math.log(c));return parseFloat((l/Math.pow(c,f)).toFixed(2))+" "+s[f]},ho=(l,s,c={maxWidth:200,maxHeight:150})=>{const{maxWidth:f,maxHeight:g}=c;return l<f&&s<g?s:l>s?f/l*s:(l===s||l<s,g)},si={jpg:"jpg",jpeg:"jpg",png:"jpg",webp:"jpg",mp4:"mp4",mov:"mp4",avi:"mp4",rmvb:"mp4",doc:"doc",docx:"doc",mp3:"mp3",wav:"mp3",aac:"mp3",flac:"mp3",pdf:"pdf",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",zip:"zip",rar:"zip","7z":"zip",txt:"txt",log:"log",svg:"svg",sketch:"sketch",exe:"exe",md:"md"},ri=l=>{if(!l)return"other";const s=l.toLowerCase().split(".").pop();return s&&si[s]||"other"},Qn=(l,s,c)=>{const{size:f,width:g,height:h,downloadUrl:k,name:o,second:i,tempUrl:e,thumbWidth:n,thumbHeight:r,thumbUrl:t,thumbSize:a}=l,u={size:f,url:c?e:k};let d={};return s===X.IMAGE?d={...u,width:g,height:h}:s===X.VOICE?d={...u,second:i}:s===X.VIDEO?d={...u,thumbWidth:n,thumbHeight:r,thumbUrl:t,thumbSize:a}:s===X.FILE&&(d={...u,fileName:o,url:k}),{body:d,type:s}},ai=async l=>await(await fetch(l)).blob(),ii=async(l,s)=>{const c=await ai(l),f=c.type,g=s||Date.now()+"_emoji.png";return new File([c],g,{type:f})},li=["src","alt"],ci=ce({__name:"image",props:{body:{}},setup(l){const s=l,c=ks(),f=P(!1),g=P(!0),h=z(()=>{const{width:i,height:e}=s.body;return ho(i,e)}),k=()=>{const{width:i,height:e}=s.body;return`width: ${h.value/e*i}px`},o=()=>{g.value=!1,f.value=!0};return(i,e)=>{var r,t,a;const n=tt;return x(),T("div",{class:"image",style:Qe({height:h.value+"px"}),onClick:e[1]||(e[1]=p=>{var u;return b(c).show((u=i.body)==null?void 0:u.url)})},[f.value?(x(),T("div",{key:0,class:"image-slot",style:Qe(k())},[$(n,{icon:"dazed",size:36,colorful:""}),Ee(" 加载失败 ")],4)):(x(),T(Ve,{key:1},[(r=i.body)!=null&&r.url?(x(),T("img",{key:0,src:(t=i.body)==null?void 0:t.url,draggable:"false",onClick:e[0]||(e[0]=p=>{var u;return b(c).show((u=i.body)==null?void 0:u.url)}),onError:o,alt:(a=i.body)==null?void 0:a.url},null,40,li)):Y("",!0)],64))],4)}}}),ui={class:"saying"},di={class:"num"},pi=ce({__name:"voice",props:{body:{}},setup(l){const s=l,c=Cs(),f=z(()=>c.previewUrl===s.body.url&&c.isPlaying);return(g,h)=>{var o;const k=tt;return x(),T("div",{class:"voice",onClick:h[0]||(h[0]=i=>b(c).open(g.body.url))},[O("div",ui,[O("span",{class:le(["shelter",{play:f.value}])},null,2),$(k,{icon:"saying",size:18})]),O("span",di,te((o=g.body)==null?void 0:o.second)+'"',1)])}}});const fi=()=>{const l=P(0),s=P(!1),{on:c,trigger:f}=wt(),g=o=>{const i=new URL(o).pathname,e=i.lastIndexOf(".");return e===-1?"":i.slice(e+1)},h=o=>{const i=new URL(o).pathname,e=i.lastIndexOf("/");return e===-1?"未知文件":i.slice(e+1)};return{onLoaded:c,downloadFile:(o,i,e)=>{s.value=!0;const n=new XMLHttpRequest;n.open("GET",o,!0),n.responseType="blob",n.onprogress=r=>{if(r.lengthComputable){const t=Math.floor(r.loaded/r.total*100);l.value=t}},n.onload=()=>{if(n.status===200){const r=new Blob([n.response],{type:"application/octet-stream"}),t=document.createElement("a");t.href=URL.createObjectURL(r);const a=g(o),p=e||a;if(i)t.download=`${i}${p?".":""}${p}`;else{const u=h(o);t.download=u}t.click(),URL.revokeObjectURL(t.href),f("success")}else f("fail");l.value=0,s.value=!1},n.send()},process:l,isDownloading:s}},mi=Ls("downloadQuenu",()=>{const s=Pt([]),c=Pt(new Map),f=e=>{s.push(e)},g=e=>{const n=s.indexOf(e);n>-1&&s.splice(n,1)},h=()=>{if(!s.length||c.size>=1)return;const e=s.shift();e&&k(e)},k=e=>{const{downloadFile:n,isDownloading:r,process:t,onLoaded:a}=fi(),p=at(t,()=>{c.set(e,{url:e,isDownloading:r.value,process:t.value})});a(()=>{p(),c.delete(e),h()}),e&&n(e)};return{quenu:s,addQuenuAction:f,removeQuenuAction:g,dequeue:h,downloadObjMap:c,download:e=>{f(e),h()},cancelDownload:e=>{s.includes(e)&&g(e)}}}),vi={class:"file"},gi={class:"file-desc"},hi={class:"file-name"},yi={class:"file-size"},_i=ce({__name:"file",props:{body:{}},setup(l){const s=l,{downloadObjMap:c,download:f,quenu:g,cancelDownload:h}=mi(),k=()=>{f(s.body.url)},o=()=>{h(s.body.url)},i=z(()=>{var r;return((r=c.get(s.body.url))==null?void 0:r.isDownloading)||!1}),e=z(()=>{var r;return((r=c.get(s.body.url))==null?void 0:r.process)||0}),n=z(()=>g.includes(s.body.url));return(r,t)=>{var v,_,y;const a=tt,p=gt,u=Br,d=$r;return x(),T("div",vi,[$(a,{icon:b(ri)((v=r.body)==null?void 0:v.fileName),size:32,colorful:""},null,8,["icon"]),O("div",gi,[O("span",hi,te(((_=r.body)==null?void 0:_.fileName)||"未知文件"),1),O("span",yi,te(b(oi)((y=r.body)==null?void 0:y.size)),1)]),n.value?(x(),re(u,{key:0,class:"mx-1",size:"small",type:"warning",onClick:o},{default:N(()=>[Ee(" 等待下载 "),$(p,null,{default:N(()=>[$(b(Mn))]),_:1})]),_:1})):i.value?(x(),re(d,{key:2,type:"circle",percentage:e.value,width:22,"stroke-width":1,"show-text":!1},null,8,["percentage"])):(x(),re(a,{key:1,icon:"xiazai",size:22,onClick:k}))])}}}),bi=["src","alt"],ki=ce({__name:"video",props:{body:{}},setup(l){const s=l,c=xs(),f=()=>{const g=s.body.thumbWidth||0,h=s.body.thumbHeight||0;return ho(g,h)};return(g,h)=>{const k=tt;return x(),T("div",{class:"video",style:Qe(`height:${f()}px`),onClick:h[0]||(h[0]=o=>{var i;return b(c).open((i=g.body)==null?void 0:i.url)})},[$(k,{icon:"bofang",size:30}),O("img",{src:g.body.thumbUrl,alt:g.body.thumbUrl},null,8,bi)],4)}}}),Ci={class:"text"},xi=["onClick"],Si={key:0,class:"text-card-image-wrapper"},wi=["src"],Ii={class:"text-card-link-content"},Mi={class:"text-card-title ellipsis-1"},Ei={class:"text-card-desc ellipsis-2"},$i=ce({__name:"text",props:{body:{}},setup(l){const s=l,c=s.body.urlContentMap||{},f=Object.keys(c),g=z(()=>{let o=s.body.content||"";o=o.replace(/&nbsp;/g," ");const i=new RegExp(`(@\\S+\\s|${f.join("|")}|\\S+\\s)`,"g");return o.split(i)}),h=o=>{o&&window.open(o.startsWith("http")?o:"//"+o,"_blank")};function k(o){const i=o.target;i&&(i.style.opacity="0")}return(o,i)=>(x(),T("div",Ci,[(x(!0),T(Ve,null,It(g.value,(e,n)=>(x(),T(Ve,null,[e.startsWith("@")&&e.trim()!==""&&e.trim()!=="@"?(x(),T("span",{key:e,class:"text-mention"},te(e),1)):(x(),T(Ve,{key:1},[Ee(te(e),1)],64)),b(f).includes(e)?(x(),T("div",{key:e+n,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-card",onClick:r=>h(e.trim())},[b(c)[e].image?(x(),T("div",Si,[O("img",{class:"text-card-image",src:b(c)[e].image,onError:k},null,40,wi)])):Y("",!0),O("div",Ii,[O("span",Mi,te(b(c)[e].title),1),O("span",Ei,te(b(c)[e].description),1)])],8,xi)):Y("",!0)],64))),256))]))}}),Oi={class:"image emoji"},Ti={key:0,class:"image-slot"},Li=["src","alt"],Ri=ce({__name:"emoji",props:{body:{}},setup(l){const s=P(!1),c=P(!0),f=()=>{c.value=!1,s.value=!0};return(g,h)=>{var o,i;const k=tt;return x(),T("div",Oi,[s.value?(x(),T("div",Ti,[$(k,{icon:"dazed",size:36,colorful:""}),Ee(" 加载失败 ")])):(x(),T(Ve,{key:1},[(o=g.body)!=null&&o.url?(x(),T("img",{key:0,src:(i=g.body)==null?void 0:i.url,onError:f,alt:g.body.url,draggable:"false"},null,40,Li)):Y("",!0)],64))])}}}),Bi=ce({__name:"index",props:{message:{}},setup(l){const s={[X.UNKNOWN]:"",[X.TEXT]:$i,[X.RECALL]:"",[X.SYSTEM]:"",[X.IMAGE]:ci,[X.VOICE]:pi,[X.FILE]:_i,[X.VIDEO]:ki,[X.EMOJI]:Ri},c=ht();return(f,g)=>(x(),re(en(s[f.message.type]),{body:f.message.body,"data-message-id":f.message.id,draggable:b(c).isSign?"true":"false"},null,8,["body","data-message-id","draggable"]))}}),Ni={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ji=O("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),zi=[ji];function Pi(l,s){return x(),T("svg",Ni,zi)}const Ai={name:"ep-check",render:Pi};const yo=l=>{const s=z(()=>l.messageMark.userLike===bt.YES),c=z(()=>l.messageMark.userDislike===bt.YES),f=z(()=>l.messageMark.likeCount),g=z(()=>l.messageMark.dislikeCount);return{isLike:s,isDisLike:c,likeCount:f,dislikeCount:g,onLike:async()=>{const o=s.value?$t.Cancel:$t.Confirm;await ct.markMsg({actType:o,markType:Wn.LIKE,msgId:l.id}).send();const i=o===$t.Confirm;l.messageMark.userLike=i?bt.YES:bt.NO,c.value&&(l.messageMark.userDislike=bt.NO)},onDisLike:async()=>{const o=c.value?$t.Cancel:$t.Confirm;await ct.markMsg({actType:o,markType:Wn.DISLIKE,msgId:l.id}).send();const i=o===$t.Confirm;l.messageMark.userDislike=i?bt.YES:bt.NO,s.value&&(l.messageMark.userLike=bt.NO)}}},Di={key:0,class:"msg-option"},Fi={class:"msg-option-item",title:"回复"},Ui={class:"msg-option-item",title:"点赞"},Vi={class:"msg-option-item",title:"不喜欢"},Wi=ce({__name:"index",props:{msg:{}},setup(l){const s=l,c=Ct(),{isLike:f,isDisLike:g,onLike:h,onDisLike:k}=yo(s.msg.message),o=async i=>{i&&(c.currentMsgReply=i,it.emit("focusMsgInput"))};return(i,e)=>{const n=tt,r=vt("login");return i.msg.loading?Y("",!0):(x(),T("div",Di,[O("span",Fi,[_e($(n,{icon:"reply",size:14},null,512),[[r,()=>o(i.msg)]])]),O("span",Ui,[_e($(n,{icon:"like",size:14,class:le([{"like-active":b(f)}])},null,8,["class"]),[[r,()=>b(h)()]])]),O("span",Vi,[_e($(n,{icon:"dislike",size:15,class:le([{"dislike-active":b(g)}])},null,8,["class"]),[[r,()=>b(k)()]])])]))}}});const Hi=dt(Wi,[["__scopeId","data-v-f3e75f2b"]]),Gi=l=>new Promise((s,c)=>{try{const f=document.createElement("textarea");f.setAttribute("readonly","readonly"),f.value=l,f.style.zIndex="-1",document.body.appendChild(f),f.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(f),s(l)}catch(f){c(f)}}),Ki=l=>{const s=document.createElement("canvas"),c=s.getContext("2d"),f=new Image;f.crossOrigin="Anonymous",f.src=l,f.onload=()=>{c&&(s.width=f.width,s.height=f.height,c.clearRect(0,0,c.canvas.width,c.canvas.height),c.drawImage(f,0,0),s.toBlob(async g=>{if(!g)return;const h=[new ClipboardItem({[g.type]:g})];try{await navigator.clipboard.write(h)}catch{}finally{s.remove()}}))}},_o=()=>{const l=P(!1),s=P(0),c=Ln(),f=wt(),g=wt(),h=wt(),k=async(e,n)=>(l.value=!0,new Promise((r,t)=>{const a=new XMLHttpRequest;a.open("PUT",e,!0),a.setRequestHeader("Content-Type",n.type),a.upload.onprogress=p=>{s.value=Math.round(p.loaded/p.total*100)},a.onload=()=>{l.value=!1,a.status===200?(g.trigger(n),r(!0)):(h.trigger(n),t(!1))},a.onerror=()=>{h.trigger(n),t(!1)},a.send(n)})),o=async e=>new Promise(t=>{if(e.type==="image/gif"){t(e);return}const a=new Image,p=URL.createObjectURL(e);a.src=p,a.onload=()=>{const{height:u,width:d}=a;let v,_;d>u?(v=240,_=Math.round(u/d*240)):(_=240,v=Math.round(d/u*240));const y=document.createElement("canvas"),S=y.getContext("2d");y.height=240,y.width=240,S&&(S.clearRect(0,0,240,240),S.fillStyle="rgba(0, 0, 0, 0)",S.fillRect(0,0,240,240),S.drawImage(a,0,0,d,u,(240-v)/2,(240-_)/2,v,_),y.toBlob(w=>{if(!w)return;const C=Date.now()+"_emoji.png",M=new File([w],C,{type:"image/png"});t(M),URL.revokeObjectURL(p)},"image/png",.9))},a.onerror=()=>{URL.revokeObjectURL(p)}}),i=async e=>{const n=await o(e);if(!n)return;const{downloadUrl:r,uploadUrl:t}=await ct.getUploadUrl({fileName:n.name,scene:"2"}).send();t&&r&&(f.trigger({file:e,downloadUrl:r}),k(t,n).then(a=>{a&&c.addEmoji(r)}))};return{isEmojiUp:l,onStart:f.on,onFail:h.on,onSuccess:g.on,uploadEmoji:i}},qi=ce({__name:"index",props:{msg:{},options:{}},setup(l){var p;const s=l,c=Ln(),{uploadEmoji:f}=_o(),g=(p=ht())==null?void 0:p.userInfo,h=Ct(),k=z(()=>{var u;return((u=s.msg)==null?void 0:u.fromUser.uid)===g.uid}),o=z(()=>(g==null?void 0:g.power)===oo.ADMIN),i=async()=>{const{id:u}=s.msg.message;u&&(await ct.recallMsg({roomId:1,msgId:u}).send(),h.updateRecallStatus({msgId:u}))},e=async()=>{const{uid:u}=s.msg.fromUser;u&&await ct.blockUser({uid:u}).send()},n=()=>{var d;const u=s.msg.message;if(u.type===X.TEXT){const v=(d=u.body)==null?void 0:d.content;Gi(v),lt.success("复制成功~")}u.type===X.IMAGE&&(Ki(u.body.url),lt.success("复制成功~"))},r=()=>{const{body:u}=s.msg.message,d=u==null?void 0:u.url;if(!d)return;const v=new XMLHttpRequest;v.open("GET",d,!0),v.responseType="blob",v.onreadystatechange=()=>{if(v.status!=200)return lt.error("下载失败~");if(v.readyState===4&&v.status===200){const _=v.response;let y=document.createElement("a");y.href=URL.createObjectURL(_),y.download=u.fileName||"未知文件",y.dispatchEvent(new MouseEvent("click")),y.remove()}},v.send()},t=()=>{const{type:u,body:d}=s.msg.message;u===X.EMOJI?c.addEmoji(d.url):ii(d.url).then(v=>{f(v)})},a=()=>h.deleteMsg(s.msg.message.id);return(u,d)=>{const v=tt,_=vt("login-show");return x(),re(b(Ae.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:N(()=>[u.msg.message.type===b(X).TEXT||u.msg.message.type===b(X).IMAGE?(x(),re(b(Ae.ContextMenuItem),{key:0,label:"复制",onClick:n},{icon:N(()=>[$(v,{icon:"copy",size:13})]),_:1})):Y("",!0),(u.msg.message.type===b(X).EMOJI||u.msg.message.type===b(X).IMAGE)&&!k.value&&b(c).emojiList.length<50?(x(),re(b(Ae.ContextMenuItem),{key:1,label:"添加到表情",onClick:t},{icon:N(()=>[$(v,{icon:"aixin",size:13})]),_:1})):Y("",!0),(k.value||o.value)&&!u.msg.loading?(x(),re(b(Ae.ContextMenuItem),{key:2,label:"撤回消息",onClick:i},{icon:N(()=>[$(v,{icon:"chehui",size:14})]),_:1})):Y("",!0),(u.msg.message.type===b(X).FILE||u.msg.message.type===b(X).IMAGE)&&!u.msg.loading?(x(),re(b(Ae.ContextMenuItem),{key:3,label:"下载",onClick:r},{icon:N(()=>[$(v,{icon:"xiazai",size:15})]),_:1})):Y("",!0),_e($(b(Ae.ContextMenuSeparator),null,null,512),[[_]]),_e((x(),re(b(Ae.ContextMenuItem),{label:"删除",onClick:a},{icon:N(()=>[$(v,{icon:"shanchu",size:13})]),_:1})),[[_]]),o.value?(x(),re(b(Ae.ContextMenuItem),{key:4,label:"拉黑(管理)",onClick:e},{icon:N(()=>[$(v,{icon:"lahei",size:13})]),_:1})):Y("",!0)]),_:1},8,["options"])}}});const Xi=O("span",{class:"icon"},"@",-1),Yi=ce({__name:"index",props:{uid:{},options:{}},setup(l){const s=l,c=ut(),f=async()=>{c.addFriendModalInfo.show=!0,c.addFriendModalInfo.uid=s.uid},g=(h,k)=>it.emit("onSelectPerson",{uid:h,ignoreCheck:k});return(h,k)=>{const o=tt,i=vt("login-show"),e=vt("friends");return x(),re(b(Ae.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:N(()=>[_e((x(),re(b(Ae.ContextMenuItem),{label:"艾特Ta",onClick:k[0]||(k[0]=n=>g==null?void 0:g(s.uid,!0))},{icon:N(()=>[Xi]),_:1})),[[i]]),_e((x(),re(b(Ae.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:f},{icon:N(()=>[$(o,{icon:"tianjia",size:13})]),_:1})),[[e,h.uid]])]),_:1},8,["options"])}}});const Zi=l=>(nn("data-v-decfefdf"),l=l(),on(),l),Ji={class:"user-card_top"},Qi={class:"user-card_top-avatar"},el={class:"user-card_top-info"},tl={class:"user-card_top-info_name"},nl={class:"user-card_top-info_id"},ol={class:"user-card_top-info_place"},sl={key:0,class:"user-card_badge"},rl=["src","alt","title"],al=["src","alt","title"],il={class:"user-card_other"},ll=Zi(()=>O("span",null,"发消息",-1)),cl=ce({__name:"UserCard",props:{user:{}},setup(l){const s=l,c=Ct(),f=ut(),g=On(),h=ht(),k=P(),o=async()=>{const i=await ct.sessionDetailWithFriends({uid:s.user.uid}).send();f.currentSession.roomId=i.roomId,f.currentSession.type=so.Single,c.updateSessionLastActiveTime(i.roomId,i)};return yt(()=>{g.getBatchBadgeInfo(s.user.itemIds||[])}),(i,e)=>{var p;const n=Rn,r=Qt,t=$n,a=tt;return x(),T("div",{ref_key:"userCard",ref:k,class:"user-card"},[O("div",Ji,[O("div",Qi,[$(n,{shape:"square",size:55,src:i.user.avatar},null,8,["src"])]),O("div",el,[$(r,{effect:"dark",content:i.user.name,placement:"top-start"},{default:N(()=>[O("div",tl,"昵称："+te(i.user.name),1)]),_:1},8,["content"]),O("div",nl,"uid："+te(i.user.uid),1),O("div",ol,"地区："+te(i.user.locPlace),1)])]),(p=i.user.itemIds)!=null&&p.length?(x(),T("div",sl,[(x(!0),T(Ve,null,It(i.user.itemIds,u=>{var d,v,_;return x(),T("div",{class:"user-card_badge-item",key:u},[i.user.wearingItemId===u?(x(),re(t,{key:0,"is-dot":""},{default:N(()=>{var y,S,w;return[O("img",{class:"user-card_badge-item",src:(y=b(g).badgeCachedList[u])==null?void 0:y.img,alt:(S=b(g).badgeCachedList[u])==null?void 0:S.describe,title:(w=b(g).badgeCachedList[u])==null?void 0:w.describe},null,8,rl)]}),_:2},1024)):(x(),T("img",{key:1,class:"user-card_badge-item",src:(d=b(g).badgeCachedList[u])==null?void 0:d.img,alt:(v=b(g).badgeCachedList[u])==null?void 0:v.describe,title:(_=b(g).badgeCachedList[u])==null?void 0:_.describe},null,8,al))])}),128))])):Y("",!0),O("div",il,[b(h).isSign?(x(),T("div",{key:0,class:"user-card_other-item user-card_other_send",onClick:o},[$(a,{class:"tool-icon",icon:"chat",size:28}),ll])):Y("",!0)])],512)}}});const ul=dt(cl,[["__scopeId","data-v-decfefdf"]]),dl={key:0,class:"send-time-block"},pl={key:1,class:"send-time-block"},fl={class:"chat-item-user-info"},ml=["src"],vl={class:"user-ip"},gl={key:0,class:"send-time"},hl={key:0,class:"chat-item-read-count-text"},yl={class:"ellipsis"},_l={key:1,class:"extra"},bl=ce({inheritAttrs:!1,__name:"index",props:{msg:{},isShowTime:{type:Boolean,default:!0},isShowTimeBlock:{type:Boolean,default:!0},bubbleMode:{default:"spread"},tooltipTrigger:{default:()=>"hover"}},setup(l){const s=l,c=z(()=>s.msg.message),f=z(()=>s.msg.fromUser),g=ht(),h=Ct(),k=ut(),o=Zt(f.value.uid),i=z(()=>{var L;return(L=o==null?void 0:o.value)==null?void 0:L.wearingItemId}),e=gs(i),n=z(()=>f.value.uid===(g==null?void 0:g.userInfo.uid)),r=z(()=>({"chat-item":!0,"is-me":n.value,right:n.value&&s.bubbleMode==="spread"||s.bubbleMode==="right"})),t=P(null),a=P(null),p=P(),u=Pt({read:0,unread:null}),d=Yt("virtualListRef"),v=P(!1),_=P(!1),y=P({x:0,y:0}),{isLike:S,isDisLike:w,likeCount:C,dislikeCount:M,onLike:R,onDisLike:D}=yo(s.msg.message),Z=z(()=>[X.RECALL,X.SYSTEM].includes(c.value.type)),V=async L=>{var I,A;const{id:F}=L,{reply:ae}=L.body;if(!ae||!ae.canCallback)return;const be=h.getMsgIndex(ae.id);if(be>-1)(I=d==null?void 0:d.value)==null||I.scrollToIndex(be,!0,12);else{const J=h.getMsgIndex(F),K=Math.ceil((ae.gapCount-J+1)/Hn)*Hn;await h.loadMore(K),setTimeout((A=d==null?void 0:d.value)==null?void 0:A.scrollToIndex(h.getMsgIndex(ae.id),!1,12),0)}},ee=L=>{if(!g.isSign)return;const{x:F,y:ae}=L;y.value.x=F,y.value.y=ae,v.value=!0},H=L=>{if(!g.isSign||n.value)return;const{x:F,y:ae}=L;y.value.x=F,y.value.y=ae,_.value=!0},ne=P(null);yt(()=>{tn(()=>{if(t.value&&a.value){const ae=t.value.clientWidth,be=a.value.clientWidth;ae+150<=be?p.value="right-start":s.msg.message.body.reply?p.value="top-end":p.value="bottom-end"}const L=Rs(ne),F=s.msg.message;n.value&&ne&&![X.RECALL,X.SYSTEM].includes(F.type)&&at(L,ae=>{ae?it.emit("onAddReadCountTask",{msgId:s.msg.message.id}):it.emit("onRemoveReadCountTask",{msgId:s.msg.message.id})})}),it.on("onGetReadCount",L=>{const F=L.get(s.msg.message.id);F&&(u.read=F.readCount,u.unread=F.unReadCount)})});const de=L=>{u.unread!==0&&(k.currentReadUnreadList.msgId=L,k.currentReadUnreadList.show=!0)};return(L,F)=>{const ae=Jt,be=po,I=Qt,A=Ai,J=gt,K=tt,q=Bi,Ce=vt("login");return x(),T(Ve,null,[L.isShowTimeBlock&&L.msg.timeBlock?(x(),T("span",dl,te(L.msg.timeBlock),1)):Y("",!0),Z.value?(x(),T("span",pl,te(c.value.body),1)):Y("",!0),O("div",{ref_key:"msgVisibleEl",ref:ne},[$(Ot,{name:"remove"},{default:N(()=>{var we,Me;return[Z.value?Y("",!0):(x(),T("div",{key:0,class:le(r.value)},[$(be,{placement:"right",trigger:"hover"},{reference:N(()=>[$(ae,{src:b(o).avatar,onContextmenu:F[0]||(F[0]=St(xe=>H(xe),["prevent","stop"]))},null,8,["src"])]),default:N(()=>[$(ul,{user:b(o)},null,8,["user"])]),_:1}),O("div",{class:"chat-item-box",ref_key:"boxRef",ref:a},[O("div",fl,[$(I,{effect:"dark",content:(we=b(e))==null?void 0:we.describe,placement:n.value?"top-end":"top-start",teleported:!1},{default:N(()=>{var xe,$e;return[_e(O("img",{class:"user-badge",src:(xe=b(e))==null?void 0:xe.img},null,8,ml),[[Ke,($e=b(e))==null?void 0:$e.img]])]}),_:1},8,["content","placement"]),O("span",{class:"user-name",onContextmenu:F[1]||(F[1]=St(xe=>H(xe),["prevent","stop"]))},te(b(o).name),33),O("span",vl,"("+te(b(o).locPlace||"未知")+")",1),L.isShowTime?(x(),T("span",gl,te(b(no)(L.msg.message.sendTime)),1)):Y("",!0)]),$(I,{effect:"light","popper-class":"option-tooltip",trigger:L.tooltipTrigger,placement:p.value||"bottom-end",offset:2,"show-arrow":!1,teleported:!1},{content:N(()=>[$(Hi,{msg:L.msg},null,8,["msg"])]),default:N(()=>{var xe,$e;return[O("div",{ref_key:"renderMsgRef",ref:t,class:le(["chat-item-content",{uploading:(xe=L.msg)==null?void 0:xe.loading}]),onContextmenu:F[3]||(F[3]=St(Xe=>ee(Xe),["prevent","stop"]))},[n.value?(x(),T("div",{key:0,onClick:F[2]||(F[2]=Xe=>de(L.msg.message.id)),class:le(["chat-item-read-count",{"is-gray":u.unread===0}])},[u.unread!==0?(x(),T("span",hl,te(u.read),1)):(x(),re(J,{key:1},{default:N(()=>[$(A)]),_:1}))],2)):Y("",!0),($e=L.msg)!=null&&$e.loading?(x(),re(K,{key:1,icon:"loading",size:20,spin:""})):Y("",!0),$(q,{message:c.value},null,8,["message"])],34)]}),_:1},8,["trigger","placement"]),(Me=c.value.body)!=null&&Me.reply?(x(),T("div",{key:0,class:le(["chat-item-reply",{pointer:c.value.body.reply.canCallback}]),onClick:F[4]||(F[4]=xe=>V(c.value))},[c.value.body.reply.canCallback?(x(),re(K,{key:0,icon:"totop",size:12})):Y("",!0),O("span",yl,te(c.value.body.reply.username)+": "+te(c.value.body.reply.body),1)],2)):Y("",!0),b(C)+b(M)>0?(x(),T("div",_l,[$(Ot,{name:"fade"},{default:N(()=>[b(C)>0?_e((x(),T("span",{key:0,class:le(["extra-item like",{active:b(S)}])},[$(K,{icon:"like"}),$(Ot,{name:"count-up",mode:"out-in"},{default:N(()=>[(x(),T("span",{class:"count",key:b(C)},te(b(C)),1))]),_:1})],2)),[[Ce,b(R)]]):Y("",!0)]),_:1}),$(Ot,{name:"fade"},{default:N(()=>[b(M)>0?_e((x(),T("span",{key:0,class:le(["extra-item dlike",{active:b(w)}])},[$(K,{icon:"dislike",size:17}),$(Ot,{name:"count-up",mode:"out-in"},{default:N(()=>[(x(),T("span",{class:"count",key:b(M)},te(b(M)),1))]),_:1})],2)),[[Ce,b(D)]]):Y("",!0)]),_:1})])):Y("",!0)],512)],2))]}),_:1})],512),$(qi,{show:v.value,"onUpdate:show":F[5]||(F[5]=we=>v.value=we),options:y.value,msg:L.msg},null,8,["show","options","msg"]),$(Yi,{show:_.value,"onUpdate:show":F[6]||(F[6]=we=>_.value=we),options:y.value,uid:L.msg.fromUser.uid},null,8,["show","options","uid"])],64)}}});const Xt=3,kl=l=>(nn("data-v-331f8dc7"),l=l(),on(),l),Cl={class:"set-admin"},xl=kl(()=>O("span",null,"管理员操作",-1)),Sl={class:"admin-count"},wl={class:"flex-center"},Il={class:"add-admin-btn flex-center"},Ml=ce({__name:"AdvancedSetting",setup(l){const s=Ft(),c=ht(),f=P(!1),g=P([]),h=z(()=>s.memberList.map(n=>({...n,disabled:!!n.roleId}))),k=z(()=>!s.adminUidList.includes(c.userInfo.uid)&&s.currentLordId!==c.userInfo.uid||s.adminList.length>=Xt),o=n=>{n.length+s.adminList.length>Xt&&lt.error("管理员数量不能超过"+Xt+"个")},i=async()=>{await s.addAdmin(g.value),f.value=!1,lt.success("添加管理员成功")},e=async n=>{await s.revokeAdmin([n]),lt.success("撤销管理员成功")};return(n,r)=>{const t=Lt,a=Jt,p=gt,u=Rn,d=$n,v=uo,_=Ss,y=ro;return x(),T("div",Cl,[O("h5",null,[xl,O("span",Sl," ("+te(b(s).adminList.length)+"/"+te(b(Xt))+") ",1)]),O("div",wl,[$(t,{type:"primary",size:"small",onClick:r[0]||(r[0]=S=>f.value=!0),disabled:k.value},{default:N(()=>[Ee(" 设置管理员 ")]),_:1},8,["disabled"]),(x(!0),T(Ve,null,It(b(s).adminList,S=>(x(),T("div",{key:S.uid,class:"admin-avatar flex-center"},[$(v,{title:"是否撤销该群管理的身份？","confirm-button-text":"确认","cancel-button-text":"取消",width:"200",onConfirm:w=>e(S.uid)},{reference:N(()=>[$(d,{value:"-"},{default:N(()=>[$(u,{src:S.avatar,size:"small"},{default:N(()=>[$(p,{size:10},{default:N(()=>[$(a)]),_:1})]),_:2},1032,["src"])]),_:2},1024)]),_:2},1032,["onConfirm"])]))),128)),$(y,{modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=S=>f.value=S)},{default:N(()=>[$(_,{modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=S=>g.value=S),data:h.value,props:{key:"uid",label:"name",disabled:"disabled"},class:"add-admin-transfer flex-center",titles:["未设置","已设置"],onLeftCheckChange:o},null,8,["modelValue","data"]),O("div",Il,[$(t,{type:"primary",onClick:i},{default:N(()=>[Ee("添加")]),_:1})])]),_:1},8,["modelValue"])])])}}});const El=dt(Ml,[["__scopeId","data-v-331f8dc7"]]),$l=l=>(nn("data-v-7f255a04"),l=l(),on(),l),Ol={class:"dead-zone"},Tl=$l(()=>O("h5",null,[O("span",null,"退出群聊")],-1)),Ll={class:"flex-center"},Rl=ce({__name:"DeadZoneSetting",setup(l){const s=Ft(),c=async()=>{await s.exitGroup(),lt.success("退出群聊成功")};return(f,g)=>{const h=Lt,k=uo;return x(),T("div",Ol,[Tl,O("div",Ll,[$(k,{title:"是否退出该群聊？","confirm-button-text":"确认","cancel-button-text":"取消",width:"200",onConfirm:c},{reference:N(()=>[$(h,{type:"danger",size:"small"},{default:N(()=>[Ee("退出群聊")]),_:1})]),_:1})])])}}});const Bl=dt(Rl,[["__scopeId","data-v-7f255a04"]]),Nl={class:"setting-box"},jl={class:"advanced"},zl={class:"dead-zone"},Pl=ce({__name:"SettingBox",setup(l){return(s,c)=>{const f=Fs;return x(),T("div",Nl,[$(f,{"content-position":"left"},{default:N(()=>[Ee("高级")]),_:1}),O("div",jl,[$(El)]),$(f,{"content-position":"left"},{default:N(()=>[Ee("危险区")]),_:1}),O("div",zl,[$(Bl)])])}}}),Al={class:"room-name"},Dl={class:"name"},Fl=O("h4",{class:"text-[#f5f5f5]"},"设置",-1),Ul=ce({__name:"index",setup(l){const s=Ct(),c=P(!1);return(f,g)=>{var k,o;const h=Zs;return x(),T(Ve,null,[O("div",Al,[O("span",Dl,te((k=b(s).currentSessionInfo)==null?void 0:k.name),1),b(s).isGroup&&!((o=b(s).currentSessionInfo)!=null&&o.hot_Flag)?(x(),T("span",{key:0,class:"setting",onClick:g[0]||(g[0]=i=>c.value=!0)}," 设置 ")):Y("",!0)]),$(h,{modelValue:c.value,"onUpdate:modelValue":g[1]||(g[1]=i=>c.value=i),direction:"rtl","append-to-body":""},{header:N(()=>[Fl]),default:N(()=>[$(Pl)]),_:1},8,["modelValue"])],64)}}});const Vl={key:2,class:"empty"},Wl=ce({__name:"index",setup(l){const s=Ct(),c=P(),f=z(()=>s.currentMessageOptions),g=z(()=>s.chatMessageList),h=z(()=>s.currentNewMsgCount),k=()=>{c.value&&(c.value.scrollToBottom(),s.clearNewMsgCount())},o=()=>{var r;c.value.scrollToIndex(g.value.length-(((r=h.value)==null?void 0:r.count)||0)),s.clearNewMsgCount()};zt("virtualListRef",c),yt(()=>{tn(()=>{s.chatListToBottomAction=()=>{k()}})});const i=async()=>{var t;if((t=f.value)!=null&&t.isLoading)return;const r=c.value.getSizes();await s.loadMore(),c.value.scrollToIndex(c.value.getSizes()-r)},e=vo(r=>{const{offset:t,clientSize:a,scrollSize:p}=r;if(!t||!a||!p)return;t+a>=p-a?(h.value&&(h.value.isStart=!1),s.clearNewMsgCount()):h.value&&(h.value.isStart=!0)},100),n=r=>r.message.id;return(r,t)=>{var d,v,_,y,S,w;const a=ba,p=gt,u=va;return x(),T("div",{class:"chat-msg-list",onContextmenu:t[0]||(t[0]=St(()=>{},["prevent"]))},[$(Ul),(d=f.value)!=null&&d.isLoading?(x(),re(p,{key:0,size:14,class:"loading"},{default:N(()=>[$(a),Ee(" 消息加载中 ")]),_:1})):Y("",!0),(v=g.value)!=null&&v.length?(x(),re(b(go),{key:1,ref_key:"virtualListRef",ref:c,class:"virtual-list scroll-hover",dataPropName:"msg",data:g.value,"data-key":n,item:bl,size:20,onTotop:i,onScroll:b(e),onOk:k},null,8,["data","onScroll"])):Y("",!0),!((_=f.value)!=null&&_.isLoading)&&((y=g.value)==null?void 0:y.length)===0?(x(),T("div",Vl,"暂无消息，快来发送第一条消息吧~")):Y("",!0),_e(O("span",{class:"new-msgs-tips",onClick:o},[Ee(te((S=h.value)==null?void 0:S.count)+" 条新消息 ",1),$(p,{size:10},{default:N(()=>[$(u)]),_:1})],512),[[Ke,((w=h.value)==null?void 0:w.count)&&h.value.count>0]])],32)}}});const Hl=dt(Wl,[["__scopeId","data-v-e6632fe3"]]),Gl={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Kl=O("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),ql=O("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),Xl=[Kl,ql];function Yl(l,s){return x(),T("svg",Gl,Xl)}const Zl={name:"ep-lock",render:Yl},Jl={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ql=O("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),ec=[Ql];function tc(l,s){return x(),T("svg",Jl,ec)}const nc={name:"ep-close",render:tc};var qe=(l=>(l.text="text",l.br="br",l.at="at",l))(qe||{});const oc=l=>{let s="";const c=[];return l.forEach(f=>{if((f.type===qe.text||f.type===qe.br)&&(s+=f.data),f.type===qe.at){const{uid:g=0,name:h="",avatar:k=""}=f.data;c.push({uid:g,name:h,avatar:k,length:h.length+1,offset:s.length}),s+="@"+h}}),{pureString:s,mentionList:c}},sc=(l,s)=>{let c=0;const f=[];if(s.length>0){s.forEach(h=>{const{offset:k,length:o}=h,i=l.slice(c,k);i.length>0&&f.push({type:qe.text,data:i}),f.push({type:qe.at,data:{uid:h.uid,name:h.name,avatar:h.avatar}}),c=k+o});const g=l.slice(c);g.length>0&&f.push({type:qe.text,data:g})}else l.length>0&&f.push({type:qe.text,data:l});return f},Sn=()=>{let l=null,s=null;return window.getSelection?(s=window.getSelection(),s&&s.getRangeAt&&s.rangeCount?(l=s.getRangeAt(0),{range:l,selection:s}):null):null},rc=()=>{const l=window,s=l.document;let c=s.selection,f,g,h,k=0,o=0;if(c)c.type!=="Control"&&(f=c.createRange(),f.collapse(!0),k=f.boundingLeft,o=f.boundingTop);else if(l.getSelection&&(c=l.getSelection(),c.rangeCount&&(f=c.getRangeAt(0).cloneRange(),f.getClientRects&&(f.collapse(!0),g=f.getClientRects(),g.length>0&&(h=g[0]),h&&(k=h.left,o=h.top)),k===0&&o===0||h===void 0))){const i=s.createElement("span");if(i.getClientRects){i.appendChild(s.createTextNode("​")),f.insertNode(i),h=i.getClientRects()[0],k=h.left,o=h.top;const e=i.parentNode;e==null||e.removeChild(i),e==null||e.normalize()}}return{x:k,y:o}},In=({content:l,selection:s,range:c})=>{if(!(!s||!c||!l)&&s.getRangeAt(0)&&s.rangeCount){c.deleteContents();const f=document.createElement("div"),g=document.createTextNode(l);f.appendChild(g);const h=document.createDocumentFragment();let k,o;for(;k=f.firstChild;)o=h.appendChild(k);if(c.insertNode(h),o){const i=c.cloneRange();if(!i)return;i.setStartAfter(o),i.collapse(!0),s.removeAllRanges(),s.addRange(i)}}},ac={class:"person-item__name"},ic=ce({__name:"item",props:{item:{},activeIndex:{},index:{},onSelect:{type:Function}},setup(l){const s=l,c=()=>{var f;(f=s.onSelect)==null||f.call(s,s.item.uid)};return(f,g)=>{const h=Jt;return x(),T("div",{class:le(["person-item",{"person-item--active":f.activeIndex===f.index}]),onClick:c},[$(h,{class:"avatar",src:f.item.avatar,size:26},null,8,["src"]),O("div",ac,te(f.item.name),1)],2)}}});const lc=["src"],cc={class:"dialog-footer"},uc=ce({__name:"index",setup(l){const s=P({url:""}),c=P(),f=P(!1),g=ht(),h=Yt("onChangeMsgType"),k=Yt("onChangeFile");Bs(window,"paste",e=>{var n;if(e.preventDefault(),!g.isSign)return!1;if(e.clipboardData&&((n=e.clipboardData.files)!=null&&n.length)){const r=e.clipboardData.files[0];r!=null&&r.type.includes("image")&&(c.value=r)}return!1}),co(()=>{c!=null&&c.value?(f.value=!0,s.value={url:URL.createObjectURL(c==null?void 0:c.value)}):f.value=!1});const o=()=>{s.value.url&&URL.revokeObjectURL(s.value.url),c.value=void 0,s.value={url:""}},i=async()=>{c!=null&&c.value&&(h==null||h(X.IMAGE),await(k==null?void 0:k([c==null?void 0:c.value])),f.value=!1,o())};return(e,n)=>{const r=Lt,t=ro;return x(),re(t,{class:"image-paste-modal",title:"粘贴图片",modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=a=>f.value=a),"close-on-click-modal":!1,center:"",onClose:o},{footer:N(()=>[O("span",cc,[$(r,{onClick:n[0]||(n[0]=a=>f.value=!1)},{default:N(()=>[Ee("取消")]),_:1}),$(r,{type:"primary",onClick:i},{default:N(()=>[Ee(" 发送 ")]),_:1})])]),default:N(()=>[s.value.url?(x(),T("img",{key:0,src:s.value.url},null,8,lc)):Y("",!0)]),_:1},8,["modelValue"])}}});const dc=["text","contenteditable","data-room-id"],pc=ce({inheritAttrs:!1,__name:"index",props:{disabled:{type:Boolean,default:!1},modelValue:{default:""},mentions:{default:()=>[]},maxLength:{default:-1},className:{},style:{}},emits:["update:modelValue","change","focus","blur","callBackRefAndRange","send"],setup(l,{expose:s,emit:c}){const f=l,{modelValue:g,mentions:h,maxLength:k,disabled:o}=Ns(f),i=P(),e=P(),n=On(),r=ut(),t=P(!1),a=P([]),p=Pt({x:0,y:0}),u=P(0),d=P(""),v=P(!1),_=P(null),y=P(""),S=z(()=>r.currentSession.roomId);y.value=g.value;const w=()=>{const I=sc(g==null?void 0:g.value,h.value);i.value&&(I.forEach(A=>{var J,K;if(A.type===qe.text){const q=document.createTextNode(A.data);(J=i.value)==null||J.appendChild(q)}if(A.type===qe.at){const q=document.createElement("button");q.dataset.person=JSON.stringify(A.data),q.textContent=`@${A.data.name}`,q.className="at_member",q.contentEditable="false",q.addEventListener("click",()=>!1,!1),q.tabIndex=0,(K=i.value)==null||K.appendChild(q)}}),v.value=!0)};co(()=>{var I;if(g.value&&g.value.length>0&&!v.value&&w(),!(g.value&&g.value.length>0)&&!v.value&&setTimeout(()=>{w()},500),!(g.value&&g.value.length>0)&&v&&i.value)for(;(I=i.value)!=null&&I.firstChild;)i.value.removeChild(i.value.firstChild);y.value=g.value}),at(d,()=>{a.value=n.filterUsers(d.value)}),at(S,(I,A)=>{I!==A&&(y.value="",a.value=n.currentAtUsersList)},{immediate:!0}),at(t,()=>{t.value||(u.value=0)}),at(t,()=>{if(t.value){const{x:I,y:A}=rc();if(i.value){const J=i.value.offsetWidth,q=i.value.getBoundingClientRect().left+J,Ce=300;I+Ce>q?(p.x=q-Ce,p.y=A):(p.x=I,p.y=A)}else p.x=I,p.y=A}}),at(o,I=>{I||setTimeout(()=>{var A;(A=i.value)==null||A.focus()})}),yt(()=>{tn(()=>{var I;(I=i.value)==null||I.focus()})});const C=()=>{if(i.value){const I=[],A=[].slice.call(i.value.childNodes);A.length>0&&A.forEach(q=>{if(q.nodeName==="#text"){const Ce=q;Ce.data&&Ce.data.length>0&&I.push({type:qe.text,data:Ce.data})}if(q.nodeName==="BR"&&I.push({type:qe.br,data:`
`}),q.nodeName==="BUTTON"){const we=JSON.parse(q.dataset.person);I.push({type:qe.at,data:we})}});const{pureString:J,mentionList:K}=oc(I);J.length>0&&J.charAt(J.length-1)===`
`?c("change",J.substring(0,J.length-1),K):c("change",J,K)}},M=()=>{const I=Sn();if(!I||!I.range||!I.selection){t.value=!1;return}const A=I.range.endContainer;if(!A||!A.textContent||A.nodeName!=="#text"){t.value=!1;return}const J=A.textContent.slice(0,I.selection.focusOffset),K=/@([^@]*)$/.exec(J);if(K&&K.length>=2){const[,q]=K;if(q&&q.length>20){t.value=!1,d.value="",a.value=[];return}t.value=!0,d.value=q,_.value=I}else d.value="",t.value=!1},R=([I,A],J,K)=>{var q,Ce;if(J.getRangeAt(0)&&J.rangeCount){if(((Ce=(q=J.focusNode)==null?void 0:q.parentNode)==null?void 0:Ce.nodeName)==="BUTTON")return;K.deleteContents();const we=document.createElement("div");we.appendChild(I),A&&we.appendChild(A);const Me=document.createDocumentFragment();let xe,$e;for(;xe=we.firstChild;)$e=Me.appendChild(xe);K.insertNode(Me),$e&&(K=K.cloneRange(),K.setStartAfter($e),K.collapse(!0),J.removeAllRanges(),J.addRange(K))}},D=(I,A=!1)=>{var K,q,Ce,we;t.value=!1,(K=e.value)==null||K.scrollToIndex(0);const J=i.value;if(J){J.focus();const Me=(q=_==null?void 0:_.value)==null?void 0:q.range;if(!Me)return;const xe=Me.endContainer,$e=Me.endOffset,Xe=xe.nodeValue,Ie=/@([^@]*)$/.exec(Xe);if(Ie&&Ie.length>1||A){!A&&(Ie!=null&&Ie.length)&&(Me.setStart(xe,Ie.index),Me.setEnd(xe,$e),Me.deleteContents());const nt=document.createElement("button");nt.dataset.person=JSON.stringify(I),nt.textContent=`@${I.name}`,nt.className="at_member",nt.contentEditable="false",nt.addEventListener("click",()=>!1,!1),nt.tabIndex=0;const Rt=document.createTextNode(" ");R([nt,Rt],(Ce=_==null?void 0:_.value)==null?void 0:Ce.selection,(we=_==null?void 0:_.value)==null?void 0:we.range)}C()}},Z=I=>{I.key==="2"&&I.shiftKey?t.value=!0:M()},V=I=>{if(!e.value)return;let A=0;if(I==="up"){if(A=u.value-1,A<0)return;A<e.value.getOffset()/34&&e.value.scrollToIndex(A)}if(I==="down"){if(A=u.value+1,A>a.value.length+1)return;A>6&&e.value.scrollToIndex(A-6)}u.value=A},ee=I=>{if(k.value&&k.value>0&&I.target.innerText.length>=k.value&&(I.key==="Backspace"||I.key==="Delete"||I.preventDefault()),t.value&&a.value.length>0)I.key==="ArrowDown"&&(I.preventDefault(),V("down")),I.key==="ArrowUp"&&(I.preventDefault(),V("up")),I.key==="Enter"&&(I.preventDefault(),D(a.value[u.value]),H());else{if(I.ctrlKey&&I.key==="Enter"||I.shiftKey&&I.key==="Enter"||I.metaKey&&I.key==="Enter"){I.preventDefault(),de();return}if(I.isComposing)return I.preventDefault();I.key==="Enter"&&(I.preventDefault(),c("send",I))}if(I.ctrlKey||I.metaKey)switch(I.key){case"B":case"2":case"I":case"9":case"U":case"F6":{I.preventDefault();break}}I.key==="Tab"&&(I.preventDefault(),document.execCommand("insertHTML",!1,"  "))},H=()=>{if(i.value){const I=i.value.innerText;y.value=I,c("update:modelValue",I)}C()},ne=()=>{c("blur"),_.value=Sn(),c("callBackRefAndRange",i.value,_.value),setTimeout(()=>{var I;t.value=!1,(I=e.value)==null||I.scrollToIndex(0),setTimeout(()=>{d.value=""},0)},300)},de=()=>{const I=Sn();!I||!I.range||!I.selection||In({content:`
`,selection:I.selection,range:I.range})},L=()=>{c("focus"),M()},F=I=>{I.preventDefault();let A;return window.clipboardData&&window.clipboardData.getData?A=window.clipboardData.getData("Text"):I.clipboardData&&I.clipboardData.getData&&(A=I.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,A),!1},ae=(I,A=!1)=>{I&&(it.emit("focusMsgInput"),setTimeout(()=>{const J=n.userCachedList[I];J&&(D==null||D(J,A))},10))};s({input:i,range:_,onSelectPerson:ae});const be=I=>I.uid;return(I,A)=>{var J,K;return x(),T("div",{class:le(["input-wrapper",[I.className,I.$attrs.class]]),style:Qe([I.style,I.$attrs.style])},[O("div",Ut({ref_key:"editorRef",ref:i},I.$attrs,{class:"input",id:"at-mentions-input",text:I.modelValue,contenteditable:!b(o),onInput:H,onKeyup:Z,onKeydown:ee,onBlur:ne,onFocus:L,onMouseup:M,onPaste:F,"data-room-id":(J=b(r).currentSession)==null?void 0:J.roomId}),null,16,dc),_e(O("div",{className:"at-mentions__dialog",style:Qe({top:`${p.y-14}px`,left:`${p.x||0}px`})},[(K=a.value)!=null&&K.length?(x(),re(b(go),{key:0,ref_key:"scrollRef",ref:e,class:"person-wrapper",dataPropName:"item",itemProps:{activeIndex:u.value,onSelect:ae},data:a.value,"data-key":be,item:ic,size:20},null,8,["itemProps","data"])):Y("",!0)],4),[[Ke,t.value]]),$(uc)],6)}}});const fc=dt(pc,[["__scopeId","data-v-480e81a6"]]),mc=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","😏","😒","😞","😔","😟","😕","🙁","😣","😖","😫","😩","😢","😭","😮","💨","😤","😠","😡","🤬","🤯","😳","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","🌫️","😐","😑","😬","🙄","😯","😦","😧","😮","😲","😴","🤤","😪","😵","💫","🤐","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🐶"],bo=100,vc=bo*1024*1024,gc=()=>{const l=P(!1),s=P(0),c=P(null),{on:f,trigger:g}=wt(),h=wt(),k=async(t,a,p)=>{l.value=!0;const u=new XMLHttpRequest;u.open("PUT",t,!0),u.setRequestHeader("Content-Type",a.type),u.upload.onprogress=function(d){p||(s.value=Math.round(d.loaded/d.total*100))},u.onload=function(){l.value=!1,!p&&(u.status===200?g("success"):g("fail"))},u.send(a)},o=t=>new Promise((a,p)=>{const u=document.createElement("video"),d=URL.createObjectURL(t);u.src=d,u.crossOrigin="anonymous",u.currentTime=2,u.oncanplay=()=>{var _;const v=document.createElement("canvas");v.width=u.videoWidth,v.height=u.videoHeight,(_=v.getContext("2d"))==null||_.drawImage(u,0,0,v.width,v.height),v.toBlob(y=>{if(!y)return;const S=Date.now()+"thumb.jpg",w=new File([y],S,{type:"image/jpeg"});ct.getUploadUrl({fileName:S,scene:"1"}).send().then(C=>{if(C.uploadUrl&&C.downloadUrl){k(C.uploadUrl,w,!0);const M=setInterval(()=>{l.value||(clearInterval(M),a({thumbWidth:v.width,thumbHeight:v.height,thumbUrl:C.downloadUrl,thumbSize:w.size,tempUrl:d}))})}})})},u.onerror=function(){URL.revokeObjectURL(d),p({width:0,height:0,url:null})}}),i=t=>{const a=new Image,p=URL.createObjectURL(t);return a.src=p,new Promise((u,d)=>{a.onload=function(){u({width:a.width,height:a.height,tempUrl:p})},a.onerror=function(){URL.revokeObjectURL(p),d({width:0,height:0,url:null})}})},e=t=>new Promise((a,p)=>{const u=new Audio,d=URL.createObjectURL(t);u.src=d,(async()=>{for(;isNaN(u.duration)||u.duration===1/0;)await new Promise(y=>setTimeout(y,100)),u.currentTime=1e5*Math.random();const _=Math.round(u.duration||0);a({second:_,tempUrl:d})})(),u.onerror=function(){p({second:0,tempUrl:d})}}),n=async(t,a={})=>{var y;const{name:p,size:u,type:d}=t,v=((y=p.split(".").pop())==null?void 0:y.trim().toLowerCase())||"",_={name:p,size:u,type:d,suffix:v,...a};if(d.includes("image")){const{width:S,height:w,tempUrl:C}=await i(t);return{..._,width:S,height:w,tempUrl:C}}if(d.includes("audio")){const{second:S,tempUrl:w}=await e(t);return{second:S,tempUrl:w,..._}}if(d.includes("video")){const{thumbWidth:S,thumbHeight:w,tempUrl:C,thumbTempUrl:M,thumbUrl:R,thumbSize:D}=await o(t);return{..._,thumbWidth:S,thumbHeight:w,tempUrl:C,thumbTempUrl:M,thumbUrl:R,thumbSize:D}}return _},r=async(t,a)=>{if(l.value||!t)return;const p=await n(t,a);if(p.size>vc){lt.warning(`文件不得大于 ${bo} MB`);return}const{downloadUrl:u,uploadUrl:d}=await ct.getUploadUrl({fileName:p.name,scene:"1"}).send();d&&u?(c.value={...p,downloadUrl:u},h.trigger(c),k(d,t)):g("fail")};return{fileInfo:c,isUploading:l,progress:s,onStart:h.on,onChange:f,uploadFile:r}},hc=()=>{const l=P(!1),s=P(null),c=P(0),f=P(null),g=wt(),{isSupported:h,stream:k,start:o,stop:i}=js({constraints:{audio:!0}}),e=()=>{l.value=!1,c.value=0,f.value=null,s.value&&clearInterval(s.value)},n=async()=>{if(!h.value){lt.warning("当前环境不支持录音");return}if(e(),await o(),!k.value)return;f.value=new MediaRecorder(k.value),f.value.start(),l.value=!0,s.value=setInterval(()=>{c.value++,c.value>=59&&r()},1e3);const t=[];f.value.addEventListener("dataavailable",a=>{t.push(a.data)}),f.value.addEventListener("stop",()=>{s.value&&clearInterval(s.value);const a=new Blob(t,{type:"audio/wav"}),p=new File([a],`${Date.now()}.wav`,{type:"audio/wav"});if(c.value<2){lt.warning("录制时间太短");return}g.trigger(p),e()})},r=()=>{f.value&&(f.value.stop(),i())};return{isRecording:l,second:c,start:n,stop:r,reset:e,onEnd:g.on}},yc=()=>{const l=ut(),s=z(()=>JSON.parse(localStorage.getItem("USER_INFO")||"{}")),c=z(()=>l.currentSession.roomId);return{mockMessage:(g,h,k)=>{const o=Date.now(),i=Math.floor(Math.random()*15),e=Number(String(o).slice(-7)+i),n=g===1?h.content:null,{uid:r,name:t,avatar:a}=s.value;return{fromUser:{username:t,uid:r,avatar:a,locPlace:"XX"},message:{id:e,roomId:c.value,sendTime:Number(o),content:n,urlContentMap:{},type:g,body:h,messageMark:{likeCount:0,userLike:0,dislikeCount:0,userDislike:0,...k}},sendTime:String(o),loading:!0}}}},ko=l=>(nn("data-v-ee162a3a"),l=l(),on(),l),_c={class:"chat-edit"},bc={class:"reply-msg-wrapper"},kc={class:"msg-input"},Cc={class:"recorded-tips"},xc={class:"emoji-panel"},Sc={class:"emoji-panel-content"},wc={class:"emoji-list"},Ic={class:"emoji-panel-content"},Mc=["onClick","onContextmenu"],Ec=["src"],$c={key:1,class:"item-add"},Oc={class:"footer"},Tc=ko(()=>O("div",{class:"divider"},null,-1)),Lc=ko(()=>O("span",{class:"tips-text"},"登录",-1)),Rc={key:1,class:"tips"},Bc=ce({__name:"index",setup(l){const s=ws(),c=Ct(),f=ut(),g=P(!1),h=P(""),k=P(),o=P([]),i=P(!1),e=P(!1),n=P(0),r=P(!1),t=P(X.FILE),a=P(0),p=P(!1),u=P(-1),d=()=>{setTimeout(()=>{var j,pe,Le,Se;if(!k.value)return;(pe=(j=k.value)==null?void 0:j.focus)==null||pe.call(j);const Q=(Se=(Le=k.value)==null?void 0:Le.range)==null?void 0:Se.selection;Q==null||Q.selectAllChildren(k.value.input),Q==null||Q.collapseToEnd()})},v=({uid:Q,ignoreCheck:j})=>{var pe,Le;(Le=(pe=k.value)==null?void 0:pe.onSelectPerson)==null||Le.call(pe,Q,j),i.value=!1};yt(()=>{it.on("onSelectPerson",v),it.on("focusMsgInput",d)}),ao(()=>{it.off("onSelectPerson",v),it.off("focusMsgInput",d)});const _=(Q,j)=>{ct.sendMsg({roomId:f.currentSession.roomId,msgType:Q,body:j}).send().then(pe=>{pe.message.type===X.TEXT?c.pushMsg(pe):c.updateMsg(n.value,pe),h.value="",de(),c.updateSessionLastActiveTime(f.currentSession.roomId)}).finally(()=>{var pe;g.value=!1,d(),(pe=c.chatListToBottomAction)==null||pe.call(c)})},y=()=>{var Q,j;!((Q=h.value)!=null&&Q.trim().length)||g.value||(g.value=!0,_(X.TEXT,{content:h.value,replyMsgId:(j=D.value.message)==null?void 0:j.id,atUidList:o.value.map(pe=>pe.uid)}))},S=ds(),w=ht(),C=Ln(),M=Ft(),R=z(()=>w.isSign),D=z(()=>w.isSign&&c.currentMsgReply||{}),Z=z(()=>{var Q;return(Q=D==null?void 0:D.value.fromUser)==null?void 0:Q.uid}),V=Zt(Z),ee=z(()=>C.emojiList),H=z(()=>M.countInfo.role===Tt.REMOVED),ne=()=>{var pe,Le,Se;const Q=V==null?void 0:V.value.name,j=(pe=D==null?void 0:D.value.message)==null?void 0:pe.type;return fo(Q,j,(Se=(Le=D==null?void 0:D.value.message)==null?void 0:Le.body)==null?void 0:Se.content)},de=()=>c.currentMsgReply={},L=Q=>{var Le,Se;const j=(Le=k.value)==null?void 0:Le.input,pe=(Se=k.value)==null?void 0:Se.range;!j||!pe||(In({content:Q,...pe}),h.value=j.innerText,r.value=!1,d())},F=(Q,j)=>{o.value=j},ae=Pt({multiple:!1,accept:".jpg,.png"}),{open:be,reset:I,onChange:A}=zs(ae),{isUploading:J,fileInfo:K,uploadFile:q,onStart:Ce,onChange:we}=gc(),{uploadEmoji:Me,isEmojiUp:xe}=_o(),{isRecording:$e,start:Xe,stop:Ie,onEnd:nt,second:Rt}=hc(),{mockMessage:Vt}=yc(),Bt=(Q,j=!1)=>{Q==="img"&&(t.value=X.IMAGE,ae.accept=".jpg,.png,.gif,.jpeg,.webp"),Q==="file"&&(t.value=X.FILE,ae.accept="*"),p.value=j,be()},Wt=async Q=>{if(!(Q!=null&&Q.length))return;const j=Q[0];if(t.value===X.IMAGE&&!j.type.includes("image"))return lt.error("请选择图片文件");p.value?await Me(j):await q(j)};zt("onChangeFile",Wt),zt("onChangeMsgType",Q=>{t.value=Q}),A(Wt),Ce(()=>{var Le;if(!K.value)return;K.value.type.includes("video")&&(t.value=X.VIDEO);const{type:Q,body:j}=Qn(K.value,t.value,!0),pe=Vt(Q,j);n.value=pe.message.id,c.pushMsg(pe),(Le=c.chatListToBottomAction)==null||Le.call(c)}),we(Q=>{if(Q==="success"){if(!K.value)return;const{body:j,type:pe}=Qn(K.value,t.value);_(pe,j)}I()}),nt(Q=>q(Q));const xt=()=>{t.value=X.VOICE,Xe()},sn=(Q,j)=>{Q.preventDefault(),u.value=u.value===j?-1:j},rn=vo(Q=>{_(X.EMOJI,{url:Q}),r.value=!1},1e3);return(Q,j)=>{const pe=nc,Le=gt,Se=tt,Nt=po,an=Zl,ln=vt("login");return x(),T("div",_c,[_e(O("div",bc,[O("span",null,te(ne()),1),$(Le,{class:"reply-msg-icon",size:14,onClick:de},{default:N(()=>[$(pe)]),_:1})],512),[[Ke,Object.keys(D.value).length]]),O("div",kc,[O("div",{class:"action",onClick:j[0]||(j[0]=ge=>i.value=!i.value)},[_e($(Se,{icon:"voice",class:"audio"},null,512),[[Ke,!i.value]]),_e($(Se,{icon:"jianpan"},null,512),[[Ke,i.value]])]),_e(O("div",{class:"recorded",onMousedown:j[1]||(j[1]=ge=>xt()),onMouseup:j[2]||(j[2]=ge=>b(Ie)()),onTouchstartPassive:j[3]||(j[3]=ge=>xt()),onTouchendPassive:j[4]||(j[4]=ge=>b(Ie)())},[O("div",Cc,te(b($e)?`录制中 ${b(Rt)}s`:"按住说话"),1)],544),[[Ke,i.value]]),_e($(fc,{class:"m-input",modelValue:h.value,"onUpdate:modelValue":j[5]||(j[5]=ge=>h.value=ge),ref_key:"mentionRef",ref:k,autofocus:"",tabindex:!R.value||g.value,disabled:!R.value||g.value,placeholder:R.value?g.value?"消息发送中":"来聊点什么吧~":"",mentions:o.value,onChange:F,onSend:y},null,8,["modelValue","tabindex","disabled","placeholder","mentions"]),[[Ke,!i.value]]),$(Nt,{placement:"top",effect:"dark",title:"",visible:r.value,"onUpdate:visible":j[11]||(j[11]=ge=>r.value=ge),"popper-class":"emoji-warpper","show-arrow":!1,width:b(s)==="PC"?385:"95%",trigger:"click"},{reference:N(()=>[O("div",{class:"action",onMouseover:j[6]||(j[6]=ge=>e.value=!0),onMouseleave:j[7]||(j[7]=ge=>e.value=!1)},[e.value?(x(),re(Se,{key:0,icon:"shocked",size:18,colorful:""})):(x(),re(Se,{key:1,icon:"happy1",size:18,colorful:""}))],32)]),default:N(()=>[O("div",xc,[_e(O("div",Sc,[O("ul",wc,[(x(!0),T(Ve,null,It(b(mc),(ge,pt)=>_e((x(),T("li",{class:"emoji-item",key:pt},[Ee(te(ge),1)])),[[ln,()=>L(ge)]])),128))])],512),[[Ke,a.value===0]]),_e(O("div",Ic,[(x(!0),T(Ve,null,It(ee.value,ge=>(x(),T("div",{key:ge.id,class:"item",onClick:pt=>b(rn)(ge.expressionUrl),onContextmenu:pt=>sn(pt,ge.id)},[O("img",{src:ge.expressionUrl},null,8,Ec),ge.id===u.value?(x(),re(Se,{key:0,icon:"guanbi1",class:"del",onClick:St(pt=>b(C).deleteEmoji(ge.id),["stop"])},null,8,["onClick"])):Y("",!0)],40,Mc))),128)),ee.value.length<50&&!b(xe)?(x(),re(Se,{key:0,class:"cursor-pointer item-add",icon:"tianjia",size:30,onClick:j[8]||(j[8]=ge=>Bt("img",!0))})):(x(),T("div",$c,[$(Se,{icon:"loading",spin:"",size:30})]))],512),[[Ke,a.value===1]]),O("div",Oc,[$(Se,{class:le(["cursor-pointer","footer-act",{active:a.value===0}]),icon:"biaoqing",size:18,onClick:j[9]||(j[9]=ge=>a.value=0)},null,8,["class"]),$(Se,{class:le(["cursor-pointer","footer-act",{active:a.value===1}]),icon:"aixin",size:18,onClick:j[10]||(j[10]=ge=>a.value=1)},null,8,["class"])])])]),_:1},8,["visible","width"]),$(Se,{class:"action",icon:"at",size:20,colorful:"",onClick:j[12]||(j[12]=ge=>{var pt;return b(In)({content:"@",...(pt=k.value)==null?void 0:pt.range})})}),$(Se,{class:le(["action",{disabled:b(J)}]),icon:"tupian",size:18,colorful:"",onClick:j[13]||(j[13]=ge=>Bt("img"))},null,8,["class"]),$(Se,{class:"action",icon:"wenjianjia2",size:20,colorful:"",onClick:j[14]||(j[14]=ge=>Bt("file"))}),Tc,O("div",{class:le(["action",{"is-edit":h.value.length,disabled:!h.value.length}]),onClick:y},[$(Se,{class:"send",icon:"huojian",size:20})],2)]),R.value?Y("",!0):(x(),T("span",{key:0,class:"tips",onClick:j[15]||(j[15]=ge=>b(S).showLogin=!0)},[$(Le,{class:"icon-lock"},{default:N(()=>[$(an)]),_:1}),Ee(" 点我"),Lc,Ee("之后再发言~ ")])),R.value&&H.value?(x(),T("span",Rc," 您已被踢出群聊，无法再发送消息 ")):Y("",!0)])}}});const Nc=dt(Bc,[["__scopeId","data-v-ee162a3a"]]),jc={class:"chat-box"},zc={class:"chat-wrapper"},Pc={key:1,class:"chat"},Ac=ce({__name:"index",setup(l){const s=P(!1),c=ut(),f=z(()=>c.currentSession);return(g,h)=>{const k=Zr,o=gt;return x(),T("div",jc,[O("div",zc,[s.value?(x(),re(o,{key:0,size:160,color:"var(--font-light)"},{default:N(()=>[$(k)]),_:1})):(x(),T("div",Pc,[$(Hl),$(Nc)]))]),_e($(ua,null,null,512),[[Ke,f.value.type===b(so).Group]])])}}});const Dc=dt(Ac,[["__scopeId","data-v-fffa5c7f"]]),qc=ce({__name:"index",setup(l){const s=ut();return s.unReadMark.newMsgUnreadCount=0,(c,f)=>(x(),T(Ve,null,[$(Hr),$(Dc)],64))}});export{qc as default};
